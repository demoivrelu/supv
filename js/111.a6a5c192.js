"use strict";(self["webpackChunktmp"]=self["webpackChunktmp"]||[]).push([[111],{4586:function(e,t,n){n.d(t,{A:function(){return l}});n(4114);var o=n(6805),i=n(144),r=n(6768);const a={draggedType:(0,i.KR)(null),isDragOver:(0,i.KR)(!1),isDragging:(0,i.KR)(!1)};function l(){const{draggedType:e,isDragOver:t,isDragging:n}=a,{addNodes:i}=(0,o.Id)();function l(){n.value=!1,t.value=!1,e.value=null,document.removeEventListener("drop",l)}function u(t,o){t.dataTransfer&&(t.dataTransfer.setData("application/vueflow",o),t.dataTransfer.setData("move",t.dataTransfer.effectAllowed)),e.value=o,n.value=!0,document.addEventListener("drop",l)}function s(n){n.preventDefault(),e.value&&(t.value=!0,n.dataTransfer&&n.dataTransfer.setData("move",n.dataTransfer.dropEffect))}function d(e){console.log("get nodes .....",e),t.value=!1}function c(e,t){console.log("get nodes .....",e);const n={x:0,y:0},o=e.length,r={id:String(o),type:"process",position:n,targetPosition:"left",sourcePosition:"right"};i(r),e.push(r),t.push({id:"random",source:r.id,target:r.id,type:"animation",animated:!0})}function f(e){console.log(e)}return(0,r.wB)(n,(e=>{document.body.style.userSelect=e?"none":""})),{draggedType:e,isDragOver:t,isDragging:n,onDragStart:u,onDragLeave:d,onDragOver:s,onDrop:c,addSingleNode:f}}},6993:function(e,t,n){n.d(t,{A:function(){return d}});var o=n(6768),i=n(144),r=n(4586);const a=(0,o.Lk)("div",{class:"description"},"You can drag these nodes to the pane.",-1),l={class:"nodes"};var u={__name:"SideBar",setup(e){const{onDragStart:t}=(0,r.A)();return(e,n)=>((0,o.uX)(),(0,o.CE)("aside",null,[a,(0,o.Lk)("div",l,[(0,o.Lk)("div",{class:"vue-flow__node-default",draggable:!0,onDragstart:n[0]||(n[0]=e=>(0,i.R1)(t)(e,"default"))}," Default Node ",32)])]))}};const s=u;var d=s},2647:function(e,t,n){n.d(t,{V:function(){return g}});var o=n(6768),i=n(144),r=n(4232),a=n(6805),l=(e=>(e["Lines"]="lines",e["Dots"]="dots",e))(l||{});const u=function({dimensions:e,size:t,color:n}){return(0,o.h)("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},s=function({radius:e,color:t}){return(0,o.h)("circle",{cx:e,cy:e,r:e,fill:t})};l.Lines,l.Dots;const d={[l.Dots]:"#81818a",[l.Lines]:"#eee"},c=["id","x","y","width","height","patternTransform"],f={key:2,height:"100",width:"100"},h=["fill"],v=["x","y","fill"],p={name:"Background",compatConfig:{MODE:3}},g=(0,o.pM)({...p,props:{id:{},variant:{default:()=>l.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:2}},setup(e){const{id:t,viewport:n}=(0,a.Id)(),p=(0,o.EW)((()=>{const[t,o]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],i=[t*n.value.zoom||1,o*n.value.zoom||1],r=e.size*n.value.zoom,a=e.variant===l.Dots?[r/e.offset,r/e.offset]:[i[0]/e.offset,i[1]/e.offset];return{scaledGap:i,offset:a,size:r}})),g=(0,i.lW)((()=>`pattern-${t}${e.id?`-${e.id}`:""}`)),m=(0,i.lW)((()=>e.color||e.patternColor||d[e.variant||l.Dots]));return(e,t)=>((0,o.uX)(),(0,o.CE)("svg",{class:"vue-flow__background vue-flow__container",style:(0,r.Tr)({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[(0,o.RG)(e.$slots,"pattern-container",{id:g.value},(()=>[(0,o.Lk)("pattern",{id:g.value,x:(0,i.R1)(n).x%p.value.scaledGap[0],y:(0,i.R1)(n).y%p.value.scaledGap[1],width:p.value.scaledGap[0],height:p.value.scaledGap[1],patternTransform:`translate(-${p.value.offset[0]},-${p.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[(0,o.RG)(e.$slots,"pattern",{},(()=>[e.variant===(0,i.R1)(l).Lines?((0,o.uX)(),(0,o.Wv)((0,i.R1)(u),{key:0,size:e.lineWidth,color:m.value,dimensions:p.value.scaledGap},null,8,["size","color","dimensions"])):e.variant===(0,i.R1)(l).Dots?((0,o.uX)(),(0,o.Wv)((0,i.R1)(s),{key:1,color:m.value,radius:p.value.size/e.offset},null,8,["color","radius"])):(0,o.Q3)("",!0),e.bgColor?((0,o.uX)(),(0,o.CE)("svg",f,[(0,o.Lk)("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,h)])):(0,o.Q3)("",!0)]))],8,c)])),(0,o.Lk)("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${g.value})`},null,8,v),(0,o.RG)(e.$slots,"default",{id:g.value})],4))}})},6805:function(e,t,n){n.d(t,{Id:function(){return _u},Nn:function(){return ws},Zk:function(){return ys},h7:function(){return Pl},j7:function(){return bs},nO:function(){return gs},oN:function(){return au},rV:function(){return ss},tE:function(){return Kl},yX:function(){return vr}});n(4114),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var o=n(144),i=n(6768),r=n(4232);function a(e){return!!(0,o.o5)()&&((0,o.jr)(e),!0)}function l(e){return"function"===typeof e?e():(0,o.R1)(e)}const u="undefined"!==typeof window&&"undefined"!==typeof document,s=e=>"undefined"!==typeof e,d=Object.prototype.toString,c=e=>"[object Object]"===d.call(e),f=()=>{};function h(e,t){function n(...n){return new Promise(((o,i)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(o).catch(i)}))}return n}const v=e=>e();function p(e=v){const t=(0,o.KR)(!0);function n(){t.value=!1}function i(){t.value=!0}const r=(...n)=>{t.value&&e(...n)};return{isActive:(0,o.tB)(t),pause:n,resume:i,eventFilter:r}}function g(e,t=!1,n="Timeout"){return new Promise(((o,i)=>{t?setTimeout((()=>i(n)),e):setTimeout(o,e)}))}function m(e,t,n={}){const{eventFilter:o=v,...r}=n;return(0,i.wB)(e,h(o,t),r)}function y(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:a,resume:l,isActive:u}=p(o),s=m(e,t,{...i,eventFilter:r});return{stop:s,pause:a,resume:l,isActive:u}}function w(e,t={}){if(!(0,o.i9)(e))return(0,o.QW)(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const i in e.value)n[i]=(0,o.rY)((()=>({get(){return e.value[i]},set(n){var o;const r=null==(o=l(t.replaceRef))||o;if(r)if(Array.isArray(e.value)){const t=[...e.value];t[i]=n,e.value=t}else{const t={...e.value,[i]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[i]=n}})));return n}function b(e,t=!1){function n(n,{flush:o="sync",deep:r=!1,timeout:a,throwOnTimeout:u}={}){let s=null;const d=new Promise((a=>{s=(0,i.wB)(e,(e=>{n(e)!==t&&(null==s||s(),a(e))}),{flush:o,deep:r,immediate:!0})})),c=[d];return null!=a&&c.push(g(a,u).then((()=>l(e))).finally((()=>null==s?void 0:s()))),Promise.race(c)}function r(r,a){if(!(0,o.i9)(r))return n((e=>e===r),a);const{flush:u="sync",deep:s=!1,timeout:d,throwOnTimeout:c}=null!=a?a:{};let f=null;const h=new Promise((n=>{f=(0,i.wB)([e,r],(([e,o])=>{t!==(e===o)&&(null==f||f(),n(e))}),{flush:u,deep:s,immediate:!0})})),v=[h];return null!=d&&v.push(g(d,c).then((()=>l(e))).finally((()=>(null==f||f(),l(e))))),Promise.race(v)}function a(e){return n((e=>Boolean(e)),e)}function u(e){return r(null,e)}function s(e){return r(void 0,e)}function d(e){return n(Number.isNaN,e)}function c(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(l(e))}),t)}function f(e){return h(1,e)}function h(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}if(Array.isArray(l(e))){const o={toMatch:n,toContains:c,changed:f,changedTimes:h,get not(){return b(e,!t)}};return o}{const o={toMatch:n,toBe:r,toBeTruthy:a,toBeNull:u,toBeNaN:d,toBeUndefined:s,changed:f,changedTimes:h,get not(){return b(e,!t)}};return o}}function x(e){return b(e)}function _(e){var t;const n=l(e);return null!=(t=null==n?void 0:n.$el)?t:n}const E=u?window:void 0;function S(...e){let t,n,o,r;if("string"===typeof e[0]||Array.isArray(e[0])?([n,o,r]=e,t=E):[t,n,o,r]=e,!t)return f;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const u=[],s=()=>{u.forEach((e=>e())),u.length=0},d=(e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)),h=(0,i.wB)((()=>[_(t),l(r)]),(([e,t])=>{if(s(),!e)return;const i=c(t)?{...t}:t;u.push(...n.flatMap((t=>o.map((n=>d(e,t,n,i))))))}),{immediate:!0,flush:"post"}),v=()=>{h(),s()};return a(v),v}function N(e){return"function"===typeof e?e:"string"===typeof e?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function M(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"===typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=E,eventName:r="keydown",passive:a=!1,dedupe:u=!1}=o,s=N(t),d=e=>{e.repeat&&l(u)||s(e)&&n(e)};return S(i,r,d,a)}function k(e){return JSON.parse(JSON.stringify(e))}function C(e,t,n,r={}){var a,l,u;const{clone:d=!1,passive:c=!1,eventName:f,deep:h=!1,defaultValue:v,shouldEmit:p}=r,g=(0,i.nI)(),m=n||(null==g?void 0:g.emit)||(null==(a=null==g?void 0:g.$emit)?void 0:a.bind(g))||(null==(u=null==(l=null==g?void 0:g.proxy)?void 0:l.$emit)?void 0:u.bind(null==g?void 0:g.proxy));let y=f;t||(t="modelValue"),y=y||`update:${t.toString()}`;const w=e=>d?"function"===typeof d?d(e):k(e):e,b=()=>s(e[t])?w(e[t]):v,x=e=>{p?p(e)&&m(y,e):m(y,e)};if(c){const n=b(),r=(0,o.KR)(n);let a=!1;return(0,i.wB)((()=>e[t]),(e=>{a||(a=!0,r.value=w(e),(0,i.dY)((()=>a=!1)))})),(0,i.wB)(r,(n=>{a||n===e[t]&&!h||x(n)}),{deep:h}),r}return(0,i.EW)({get(){return b()},set(e){x(e)}})}var I={value:()=>{}};function T(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new A(o)}function A(e){this._=e}function P(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function B(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function D(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=I,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}A.prototype=T.prototype={constructor:A,on:function(e,t){var n,o=this._,i=P(e+"",o),r=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);while(++r<a)if(n=(e=i[r]).type)o[n]=D(o[n],e.name,t);else if(null==t)for(n in o)o[n]=D(o[n],e.name,null);return this}while(++r<a)if((n=(e=i[r]).type)&&(n=B(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new A(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,n=o.length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var $="http://www.w3.org/1999/xhtml";const R={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),R.hasOwnProperty(t)?{space:R[t],local:e}:e}function z(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(n,e)}}function V(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function X(e){var t=O(e);return(t.local?V:z)(t)}function G(){}function L(e){return null==e?G:function(){return this.querySelector(e)}}function Y(e){"function"!==typeof e&&(e=L(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,l=t[i],u=l.length,s=o[i]=new Array(u),d=0;d<u;++d)(r=l[d])&&(a=e.call(r,r.__data__,d,l))&&("__data__"in r&&(a.__data__=r.__data__),s[d]=a);return new At(o,this._parents)}function H(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function F(){return[]}function W(e){return null==e?F:function(){return this.querySelectorAll(e)}}function K(e){return function(){return H(e.apply(this,arguments))}}function U(e){e="function"===typeof e?K(e):W(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a,l=t[r],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),i.push(a));return new At(o,i)}function Z(e){return function(){return this.matches(e)}}function j(e){return function(t){return t.matches(e)}}var q=Array.prototype.find;function Q(e){return function(){return q.call(this.children,e)}}function J(){return this.firstElementChild}function ee(e){return this.select(null==e?J:Q("function"===typeof e?e:j(e)))}var te=Array.prototype.filter;function ne(){return Array.from(this.children)}function oe(e){return function(){return te.call(this.children,e)}}function ie(e){return this.selectAll(null==e?ne:oe("function"===typeof e?e:j(e)))}function re(e){"function"!==typeof e&&(e=Z(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new At(o,this._parents)}function ae(e){return new Array(e.length)}function le(){return new At(this._enter||this._groups.map(ae),this._parents)}function ue(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function se(e){return function(){return e}}function de(e,t,n,o,i,r){for(var a,l=0,u=t.length,s=r.length;l<s;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new ue(e,r[l]);for(;l<u;++l)(a=t[l])&&(i[l]=a)}function ce(e,t,n,o,i,r,a){var l,u,s,d=new Map,c=t.length,f=r.length,h=new Array(c);for(l=0;l<c;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",d.has(s)?i[l]=u:d.set(s,u));for(l=0;l<f;++l)s=a.call(e,r[l],l,r)+"",(u=d.get(s))?(o[l]=u,u.__data__=r[l],d.delete(s)):n[l]=new ue(e,r[l]);for(l=0;l<c;++l)(u=t[l])&&d.get(h[l])===u&&(i[l]=u)}function fe(e){return e.__data__}function he(e,t){if(!arguments.length)return Array.from(this,fe);var n=t?ce:de,o=this._parents,i=this._groups;"function"!==typeof e&&(e=se(e));for(var r=i.length,a=new Array(r),l=new Array(r),u=new Array(r),s=0;s<r;++s){var d=o[s],c=i[s],f=c.length,h=ve(e.call(d,d&&d.__data__,s,o)),v=h.length,p=l[s]=new Array(v),g=a[s]=new Array(v),m=u[s]=new Array(f);n(d,c,p,g,m,h,t);for(var y,w,b=0,x=0;b<v;++b)if(y=p[b]){b>=x&&(x=b+1);while(!(w=g[x])&&++x<v);y._next=w||null}}return a=new At(a,o),a._enter=l,a._exit=u,a}function ve(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function pe(){return new At(this._exit||this._groups.map(ae),this._parents)}function ge(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"===typeof e?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),null!=t&&(i=t(i),i&&(i=i.selection())),null==n?r.remove():n(r),o&&i?o.merge(i).order():i}function me(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),u=0;u<a;++u)for(var s,d=n[u],c=o[u],f=d.length,h=l[u]=new Array(f),v=0;v<f;++v)(s=d[v]||c[v])&&(h[v]=s);for(;u<i;++u)l[u]=n[u];return new At(l,this._parents)}function ye(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this}function we(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=be);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,l=n[r],u=l.length,s=i[r]=new Array(u),d=0;d<u;++d)(a=l[d])&&(s[d]=a);s.sort(t)}return new At(i,this._parents).order()}function be(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _e(){return Array.from(this)}function Ee(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Se(){let e=0;for(const t of this)++e;return e}function Ne(){return!this.node()}function Me(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,l=r.length;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this}function ke(e){return function(){this.removeAttribute(e)}}function Ce(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ie(e,t){return function(){this.setAttribute(e,t)}}function Te(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ae(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Pe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Be(e,t){var n=O(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Ce:ke:"function"===typeof t?n.local?Pe:Ae:n.local?Te:Ie)(n,t))}function De(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $e(e){return function(){this.style.removeProperty(e)}}function Re(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Oe(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ze(e,t,n){return arguments.length>1?this.each((null==t?$e:"function"===typeof t?Oe:Re)(e,t,null==n?"":n)):Ve(this.node(),e)}function Ve(e,t){return e.style.getPropertyValue(t)||De(e).getComputedStyle(e,null).getPropertyValue(t)}function Xe(e){return function(){delete this[e]}}function Ge(e,t){return function(){this[e]=t}}function Le(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ye(e,t){return arguments.length>1?this.each((null==t?Xe:"function"===typeof t?Le:Ge)(e,t)):this.node()[e]}function He(e){return e.trim().split(/^|\s+/)}function Fe(e){return e.classList||new We(e)}function We(e){this._node=e,this._names=He(e.getAttribute("class")||"")}function Ke(e,t){var n=Fe(e),o=-1,i=t.length;while(++o<i)n.add(t[o])}function Ue(e,t){var n=Fe(e),o=-1,i=t.length;while(++o<i)n.remove(t[o])}function Ze(e){return function(){Ke(this,e)}}function je(e){return function(){Ue(this,e)}}function qe(e,t){return function(){(t.apply(this,arguments)?Ke:Ue)(this,e)}}function Qe(e,t){var n=He(e+"");if(arguments.length<2){var o=Fe(this.node()),i=-1,r=n.length;while(++i<r)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?qe:t?Ze:je)(n,t))}function Je(){this.textContent=""}function et(e){return function(){this.textContent=e}}function tt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function nt(e){return arguments.length?this.each(null==e?Je:("function"===typeof e?tt:et)(e)):this.node().textContent}function ot(){this.innerHTML=""}function it(e){return function(){this.innerHTML=e}}function rt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function at(e){return arguments.length?this.each(null==e?ot:("function"===typeof e?rt:it)(e)):this.node().innerHTML}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function ut(){return this.each(lt)}function st(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(){return this.each(st)}function ct(e){var t="function"===typeof e?e:X(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function ft(){return null}function ht(e,t){var n="function"===typeof e?e:X(e),o=null==t?ft:"function"===typeof t?t:L(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))}function vt(){var e=this.parentNode;e&&e.removeChild(this)}function pt(){return this.each(vt)}function gt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yt(e){return this.select(e?mt:gt)}function wt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bt(e){return function(t){e.call(this,t,this.__data__)}}function xt(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function _t(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Et(e,t,n){return function(){var o,i=this.__on,r=bt(t);if(i)for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function St(e,t,n){var o,i,r=xt(e+""),a=r.length;if(!(arguments.length<2)){for(l=t?Et:_t,o=0;o<a;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,d=l.length;s<d;++s)for(o=0,u=l[s];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}function Nt(e,t,n){var o=De(e),i=o.CustomEvent;"function"===typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Mt(e,t){return function(){return Nt(this,e,t)}}function kt(e,t){return function(){return Nt(this,e,t.apply(this,arguments))}}function Ct(e,t){return this.each(("function"===typeof t?kt:Mt)(e,t))}function*It(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}ue.prototype={constructor:ue,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},We.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Tt=[null];function At(e,t){this._groups=e,this._parents=t}function Pt(){return new At([[document.documentElement]],Tt)}function Bt(){return this}function Dt(e){return"string"===typeof e?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],Tt)}function $t(e){let t;while(t=e.sourceEvent)e=t;return e}function Rt(e,t){if(e=$t(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}At.prototype=Pt.prototype={constructor:At,select:Y,selectAll:U,selectChild:ee,selectChildren:ie,filter:re,data:he,enter:le,exit:pe,join:ge,merge:me,selection:Bt,order:ye,sort:we,call:xe,nodes:_e,node:Ee,size:Se,empty:Ne,each:Me,attr:Be,style:ze,property:Ye,classed:Qe,text:nt,html:at,raise:ut,lower:dt,append:ct,insert:ht,remove:pt,clone:yt,datum:wt,on:St,dispatch:Ct,[Symbol.iterator]:It};const Ot={passive:!1},zt={capture:!0,passive:!1};function Vt(e){e.stopImmediatePropagation()}function Xt(e){e.preventDefault(),e.stopImmediatePropagation()}function Gt(e){var t=e.document.documentElement,n=Dt(e).on("dragstart.drag",Xt,zt);"onselectstart"in t?n.on("selectstart.drag",Xt,zt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Lt(e,t){var n=e.document.documentElement,o=Dt(e).on("dragstart.drag",null);t&&(o.on("click.drag",Xt,zt),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yt=e=>()=>e;function Ht(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:u,dy:s,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:d}})}function Ft(e){return!e.ctrlKey&&!e.button}function Wt(){return this.parentNode}function Kt(e,t){return null==t?{x:e.x,y:e.y}:t}function Ut(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zt(){var e,t,n,o,i=Ft,r=Wt,a=Kt,l=Ut,u={},s=T("start","drag","end"),d=0,c=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,Ot).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&i.call(this,a,l)){var u=w(this,r.call(this,a,l),a,l,"mouse");u&&(Dt(a.view).on("mousemove.drag",v,zt).on("mouseup.drag",p,zt),Gt(a.view),Vt(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function v(o){if(Xt(o),!n){var i=o.clientX-e,r=o.clientY-t;n=i*i+r*r>c}u.mouse("drag",o)}function p(e){Dt(e.view).on("mousemove.drag mouseup.drag",null),Lt(e.view,n),Xt(e),u.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,o,a=e.changedTouches,l=r.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Vt(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=u[o[t].identifier])&&(Xt(e),n("drag",e,o[t]))}function y(e){var t,n,i=e.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<r;++t)(n=u[i[t].identifier])&&(Vt(e),n("end",e,i[t]))}function w(e,t,n,o,i,r){var l,c,h,v=s.copy(),p=Rt(r||n,t);if(null!=(h=a.call(e,new Ht("beforestart",{sourceEvent:n,target:f,identifier:i,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:v}),o)))return l=h.x-p[0]||0,c=h.y-p[1]||0,function n(r,a,s){var g,m=p;switch(r){case"start":u[i]=n,g=d++;break;case"end":delete u[i],--d;case"drag":p=Rt(s||a,t),g=d;break}v.call(r,e,new Ht(r,{sourceEvent:a,subject:h,target:f,identifier:i,active:g,x:p[0]+l,y:p[1]+c,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:v}),o)}}return f.filter=function(e){return arguments.length?(i="function"===typeof e?e:Yt(!!e),f):i},f.container=function(e){return arguments.length?(r="function"===typeof e?e:Yt(e),f):r},f.subject=function(e){return arguments.length?(a="function"===typeof e?e:Yt(e),f):a},f.touchable=function(e){return arguments.length?(l="function"===typeof e?e:Yt(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,f):Math.sqrt(c)},f}function jt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qt(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Qt(){}Ht.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Jt=.7,en=1/Jt,tn="\\s*([+-]?\\d+)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",on="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rn=/^#([0-9a-f]{3,8})$/,an=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),ln=new RegExp(`^rgb\\(${on},${on},${on}\\)$`),un=new RegExp(`^rgba\\(${tn},${tn},${tn},${nn}\\)$`),sn=new RegExp(`^rgba\\(${on},${on},${on},${nn}\\)$`),dn=new RegExp(`^hsl\\(${nn},${on},${on}\\)$`),cn=new RegExp(`^hsla\\(${nn},${on},${on},${nn}\\)$`),fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hn(){return this.rgb().formatHex()}function vn(){return this.rgb().formatHex8()}function pn(){return Tn(this).formatHsl()}function gn(){return this.rgb().formatRgb()}function mn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yn(t):3===n?new _n(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?wn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?wn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=an.exec(e))?new _n(t[1],t[2],t[3],1):(t=ln.exec(e))?new _n(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=un.exec(e))?wn(t[1],t[2],t[3],t[4]):(t=sn.exec(e))?wn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=dn.exec(e))?In(t[1],t[2]/100,t[3]/100,1):(t=cn.exec(e))?In(t[1],t[2]/100,t[3]/100,t[4]):fn.hasOwnProperty(e)?yn(fn[e]):"transparent"===e?new _n(NaN,NaN,NaN,0):null}function yn(e){return new _n(e>>16&255,e>>8&255,255&e,1)}function wn(e,t,n,o){return o<=0&&(e=t=n=NaN),new _n(e,t,n,o)}function bn(e){return e instanceof Qt||(e=mn(e)),e?(e=e.rgb(),new _n(e.r,e.g,e.b,e.opacity)):new _n}function xn(e,t,n,o){return 1===arguments.length?bn(e):new _n(e,t,n,null==o?1:o)}function _n(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function En(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}`}function Sn(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}${Cn(255*(isNaN(this.opacity)?1:this.opacity))}`}function Nn(){const e=Mn(this.opacity);return`${1===e?"rgb(":"rgba("}${kn(this.r)}, ${kn(this.g)}, ${kn(this.b)}${1===e?")":`, ${e})`}`}function Mn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cn(e){return e=kn(e),(e<16?"0":"")+e.toString(16)}function In(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pn(e,t,n,o)}function Tn(e){if(e instanceof Pn)return new Pn(e.h,e.s,e.l,e.opacity);if(e instanceof Qt||(e=mn(e)),!e)return new Pn;if(e instanceof Pn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,u=(r+i)/2;return l?(a=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=u<.5?r+i:2-r-i,a*=60):l=u>0&&u<1?0:a,new Pn(a,l,u,e.opacity)}function An(e,t,n,o){return 1===arguments.length?Tn(e):new Pn(e,t,n,null==o?1:o)}function Pn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Bn(e){return e=(e||0)%360,e<0?e+360:e}function Dn(e){return Math.max(0,Math.min(1,e||0))}function $n(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}jt(Qt,mn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hn,formatHex:hn,formatHex8:vn,formatHsl:pn,formatRgb:gn,toString:gn}),jt(_n,xn,qt(Qt,{brighter(e){return e=null==e?en:Math.pow(en,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Jt:Math.pow(Jt,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _n(kn(this.r),kn(this.g),kn(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En,formatHex:En,formatHex8:Sn,formatRgb:Nn,toString:Nn})),jt(Pn,An,qt(Qt,{brighter(e){return e=null==e?en:Math.pow(en,e),new Pn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Jt:Math.pow(Jt,e),new Pn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new _n($n(e>=240?e-240:e+120,i,o),$n(e,i,o),$n(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Pn(Bn(this.h),Dn(this.s),Dn(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mn(this.opacity);return`${1===e?"hsl(":"hsla("}${Bn(this.h)}, ${100*Dn(this.s)}%, ${100*Dn(this.l)}%${1===e?")":`, ${e})`}`}}));const Rn=e=>()=>e;function On(e,t){return function(n){return e+n*t}}function zn(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Vn(e){return 1===(e=+e)?Xn:function(t,n){return n-t?zn(t,n,e):Rn(isNaN(t)?n:t)}}function Xn(e,t){var n=t-e;return n?On(e,n):Rn(isNaN(e)?t:e)}const Gn=function e(t){var n=Vn(t);function o(e,t){var o=n((e=xn(e)).r,(t=xn(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=Xn(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Ln(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hn=new RegExp(Yn.source,"g");function Fn(e){return function(){return e}}function Wn(e){return function(t){return e(t)+""}}function Kn(e,t){var n,o,i,r=Yn.lastIndex=Hn.lastIndex=0,a=-1,l=[],u=[];e+="",t+="";while((n=Yn.exec(e))&&(o=Hn.exec(t)))(i=o.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Ln(n,o)})),r=Hn.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?Wn(u[0].x):Fn(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var Un,Zn=180/Math.PI,jn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qn(e,t,n,o,i,r){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Zn,skewX:Math.atan(u)*Zn,scaleX:a,scaleY:l}}function Qn(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jn:qn(t.a,t.b,t.c,t.d,t.e,t.f)}function Jn(e){return null==e?jn:(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",e),(e=Un.transform.baseVal.consolidate())?(e=e.matrix,qn(e.a,e.b,e.c,e.d,e.e,e.f)):jn)}function eo(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}function r(e,o,i,r,a,l){if(e!==i||o!==r){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:Ln(e,i)},{i:u-2,x:Ln(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}function a(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Ln(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}function l(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Ln(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}function u(e,t,n,o,r,a){if(e!==n||t!==o){var l=r.push(i(r)+"scale(",null,",",null,")");a.push({i:l-4,x:Ln(e,n)},{i:l-2,x:Ln(t,o)})}else 1===n&&1===o||r.push(i(r)+"scale("+n+","+o+")")}return function(t,n){var o=[],i=[];return t=e(t),n=e(n),r(t.translateX,t.translateY,n.translateX,n.translateY,o,i),a(t.rotate,n.rotate,o,i),l(t.skewX,n.skewX,o,i),u(t.scaleX,t.scaleY,n.scaleX,n.scaleY,o,i),t=n=null,function(e){var t,n=-1,r=i.length;while(++n<r)o[(t=i[n]).i]=t.x(e);return o.join("")}}}var to=eo(Qn,"px, ","px)","deg)"),no=eo(Jn,", ",")",")"),oo=1e-12;function io(e){return((e=Math.exp(e))+1/e)/2}function ro(e){return((e=Math.exp(e))-1/e)/2}function ao(e){return((e=Math.exp(2*e))-1)/(e+1)}const lo=function e(t,n,o){function i(e,i){var r,a,l=e[0],u=e[1],s=e[2],d=i[0],c=i[1],f=i[2],h=d-l,v=c-u,p=h*h+v*v;if(p<oo)a=Math.log(f/s)/t,r=function(e){return[l+e*h,u+e*v,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(p),m=(f*f-s*s+o*p)/(2*s*n*g),y=(f*f-s*s-o*p)/(2*f*n*g),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,r=function(e){var o=e*a,i=io(w),r=s/(n*g)*(i*ao(t*o+w)-ro(w));return[l+r*h,u+r*v,s*i/io(t*o+w)]}}return r.duration=1e3*a*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n,i=o*o;return e(n,o,i)},i}(Math.SQRT2,2,4);var uo,so,co=0,fo=0,ho=0,vo=1e3,po=0,go=0,mo=0,yo="object"===typeof performance&&performance.now?performance:Date,wo="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bo(){return go||(wo(xo),go=yo.now()+mo)}function xo(){go=0}function _o(){this._call=this._time=this._next=null}function Eo(e,t,n){var o=new _o;return o.restart(e,t,n),o}function So(){bo(),++co;var e,t=uo;while(t)(e=go-t._time)>=0&&t._call.call(void 0,e),t=t._next;--co}function No(){go=(po=yo.now())+mo,co=fo=0;try{So()}finally{co=0,ko(),go=0}}function Mo(){var e=yo.now(),t=e-po;t>vo&&(mo-=t,po=e)}function ko(){var e,t,n=uo,o=1/0;while(n)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:uo=t);so=e,Co(o)}function Co(e){if(!co){fo&&(fo=clearTimeout(fo));var t=e-go;t>24?(e<1/0&&(fo=setTimeout(No,e-yo.now()-mo)),ho&&(ho=clearInterval(ho))):(ho||(po=yo.now(),ho=setInterval(Mo,vo)),co=1,wo(No))}}function Io(e,t,n){var o=new _o;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}_o.prototype=Eo.prototype={constructor:_o,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?bo():+n)+(null==t?0:+t),this._next||so===this||(so?so._next=this:uo=this,so=this),this._call=e,this._time=n,Co()},stop:function(){this._call&&(this._call=null,this._time=1/0,Co())}};var To=T("start","end","cancel","interrupt"),Ao=[],Po=0,Bo=1,Do=2,$o=3,Ro=4,Oo=5,zo=6;function Vo(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};Yo(e,n,{name:t,index:o,group:i,on:To,tween:Ao,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Po})}function Xo(e,t){var n=Lo(e,t);if(n.state>Po)throw new Error("too late; already scheduled");return n}function Go(e,t){var n=Lo(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function Lo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yo(e,t,n){var o,i=e.__transition;function r(e){n.state=Bo,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var s,d,c,f;if(n.state!==Bo)return u();for(s in i)if(f=i[s],f.name===n.name){if(f.state===$o)return Io(a);f.state===Ro?(f.state=zo,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[s]):+s<t&&(f.state=zo,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[s])}if(Io((function(){n.state===$o&&(n.state=Ro,n.timer.restart(l,n.delay,n.time),l(r))})),n.state=Do,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Do){for(n.state=$o,o=new Array(c=n.tween.length),s=0,d=-1;s<c;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=f);o.length=d+1}}function l(t){var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=Oo,1),r=-1,a=o.length;while(++r<a)o[r].call(e,i);n.state===Oo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=zo,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Eo(r,0,n.time)}function Ho(e,t){var n,o,i,r=e.__transition,a=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(o=n.state>Do&&n.state<Oo,n.state=zo,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]):a=!1;a&&delete e.__transition}}function Fo(e){return this.each((function(){Ho(this,e)}))}function Wo(e,t){var n,o;return function(){var i=Go(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Ko(e,t,n){var o,i;if("function"!==typeof n)throw new Error;return function(){var r=Go(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=l;break}u===s&&i.push(l)}r.tween=i}}function Uo(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=Lo(this.node(),n).tween,r=0,a=i.length;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((null==t?Wo:Ko)(n,e,t))}function Zo(e,t,n){var o=e._id;return e.each((function(){var e=Go(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Lo(e,o).value[t]}}function jo(e,t){var n;return("number"===typeof t?Ln:t instanceof mn?Gn:(n=mn(t))?(t=n,Gn):Kn)(e,t)}function qo(e){return function(){this.removeAttribute(e)}}function Qo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jo(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function ei(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function ti(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return a=this.getAttribute(e),l=u+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttribute(e)}}function ni(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return a=this.getAttributeNS(e.space,e.local),l=u+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function oi(e,t){var n=O(e),o="transform"===n?no:jo;return this.attrTween(e,"function"===typeof t?(n.local?ni:ti)(n,o,Zo(this,"attr."+e,t)):null==t?(n.local?Qo:qo)(n):(n.local?ei:Jo)(n,o,t))}function ii(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ri(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ai(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ri(e,i)),n}return i._value=t,i}function li(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ii(e,i)),n}return i._value=t,i}function ui(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=O(e);return this.tween(n,(o.local?ai:li)(o,t))}function si(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}function di(e,t){return t=+t,function(){Xo(this,e).delay=t}}function ci(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?si:di)(t,e)):Lo(this.node(),t).delay}function fi(e,t){return function(){Go(this,e).duration=+t.apply(this,arguments)}}function hi(e,t){return t=+t,function(){Go(this,e).duration=t}}function vi(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?fi:hi)(t,e)):Lo(this.node(),t).duration}function pi(e,t){if("function"!==typeof t)throw new Error;return function(){Go(this,e).ease=t}}function gi(e){var t=this._id;return arguments.length?this.each(pi(t,e)):Lo(this.node(),t).ease}function mi(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Go(this,e).ease=n}}function yi(e){if("function"!==typeof e)throw new Error;return this.each(mi(this._id,e))}function wi(e){"function"!==typeof e&&(e=Z(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new Ui(o,this._parents,this._name,this._id)}function bi(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var u,s=t[l],d=n[l],c=s.length,f=a[l]=new Array(c),h=0;h<c;++h)(u=s[h]||d[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new Ui(a,this._parents,this._name,this._id)}function xi(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function _i(e,t,n){var o,i,r=xi(t)?Xo:Go;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}function Ei(e,t){var n=this._id;return arguments.length<2?Lo(this.node(),n).on.on(e):this.each(_i(n,e,t))}function Si(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ni(){return this.on("end.remove",Si(this._id))}function Mi(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=L(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l,u,s=o[a],d=s.length,c=r[a]=new Array(d),f=0;f<d;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),c[f]=u,Vo(c[f],t,n,f,c,Lo(l,n)));return new Ui(r,this._parents,t,n)}function ki(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=W(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var u,s=o[l],d=s.length,c=0;c<d;++c)if(u=s[c]){for(var f,h=e.call(u,u.__data__,c,s),v=Lo(u,n),p=0,g=h.length;p<g;++p)(f=h[p])&&Vo(f,t,n,p,h,v);r.push(h),a.push(u)}return new Ui(r,a,t,n)}var Ci=Pt.prototype.constructor;function Ii(){return new Ci(this._groups,this._parents)}function Ti(e,t){var n,o,i;return function(){var r=Ve(this,e),a=(this.style.removeProperty(e),Ve(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function Ai(e){return function(){this.style.removeProperty(e)}}function Pi(e,t,n){var o,i,r=n+"";return function(){var a=Ve(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Bi(e,t,n){var o,i,r;return function(){var a=Ve(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Ve(this,e)),a===u?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}function Di(e,t){var n,o,i,r,a="style."+t,l="end."+a;return function(){var u=Go(this,e),s=u.on,d=null==u.value[a]?r||(r=Ai(t)):void 0;s===n&&i===d||(o=(n=s).copy()).on(l,i=d),u.on=o}}function $i(e,t,n){var o="transform"===(e+="")?to:jo;return null==t?this.styleTween(e,Ti(e,o)).on("end.style."+e,Ai(e)):"function"===typeof t?this.styleTween(e,Bi(e,o,Zo(this,"style."+e,t))).each(Di(this._id,e)):this.styleTween(e,Pi(e,o,t),n).on("end.style."+e,null)}function Ri(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Oi(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Ri(e,r,n)),o}return r._value=t,r}function zi(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,Oi(e,t,null==n?"":n))}function Vi(e){return function(){this.textContent=e}}function Xi(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function Gi(e){return this.tween("text","function"===typeof e?Xi(Zo(this,"text",e)):Vi(null==e?"":e+""))}function Li(e){return function(t){this.textContent=e.call(this,t)}}function Yi(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Li(o)),t}return o._value=e,o}function Hi(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,Yi(e))}function Fi(){for(var e=this._name,t=this._id,n=Zi(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)if(a=l[s]){var d=Lo(a,t);Vo(a,e,n,s,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ui(o,this._parents,e,n)}function Wi(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(r,a){var l={value:a},u={value:function(){0===--i&&r()}};n.each((function(){var n=Go(this,o),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===i&&r()}))}var Ki=0;function Ui(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Zi(){return++Ki}var ji=Pt.prototype;function qi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Ui.prototype={constructor:Ui,select:Mi,selectAll:ki,selectChild:ji.selectChild,selectChildren:ji.selectChildren,filter:wi,merge:bi,selection:Ii,transition:Fi,call:ji.call,nodes:ji.nodes,node:ji.node,size:ji.size,empty:ji.empty,each:ji.each,on:Ei,attr:oi,attrTween:ui,style:$i,styleTween:zi,text:Gi,textTween:Hi,remove:Ni,tween:Uo,delay:ci,duration:vi,ease:gi,easeVarying:yi,end:Wi,[Symbol.iterator]:ji[Symbol.iterator]};var Qi={time:null,delay:0,duration:250,ease:qi};function Ji(e,t){var n;while(!(n=e.__transition)||!(n=n[t]))if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function er(e){var t,n;e instanceof Ui?(t=e._id,e=e._name):(t=Zi(),(n=Qi).time=bo(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)(a=l[s])&&Vo(a,e,t,s,l,n||Ji(a,t));return new Ui(o,this._parents,e,t)}Pt.prototype.interrupt=Fo,Pt.prototype.transition=er;const tr=e=>()=>e;function nr(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function or(e,t,n){this.k=e,this.x=t,this.y=n}or.prototype={constructor:or,scale:function(e){return 1===e?this:new or(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new or(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ir=new or(1,0,0);function rr(e){e.stopImmediatePropagation()}function ar(e){e.preventDefault(),e.stopImmediatePropagation()}function lr(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function ur(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sr(){return this.__zoom||ir}function dr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cr(){return navigator.maxTouchPoints||"ontouchstart"in this}function fr(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function hr(){var e,t,n,o=lr,i=ur,r=fr,a=dr,l=cr,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],d=250,c=lo,f=T("start","zoom","end"),h=500,v=150,p=0,g=10;function m(e){e.property("__zoom",sr).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(l).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return t=Math.max(u[0],Math.min(u[1],t)),t===e.k?e:new or(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new or(e.k,o,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,o){e.on("start.zoom",(function(){_(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,r=arguments,a=_(e,r).event(o),l=i.apply(e,r),u=null==n?b(l):"function"===typeof n?n.apply(e,r):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),d=e.__zoom,f="function"===typeof t?t.apply(e,r):t,h=c(d.invert(u).concat(s/d.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new or(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function _(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function S(e,...t){if(o.apply(this,arguments)){var n=_(this,t).event(e),i=this.__zoom,l=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),d=Rt(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=i.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(i.k===l)return;n.mouse=[d,i.invert(d)],Ho(this),n.start()}ar(e),n.wheel=setTimeout(c,v),n.zoom("mouse",r(w(y(i,l),n.mouse[0],n.mouse[1]),n.extent,s))}function c(){n.wheel=null,n.end()}}function N(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,a=_(this,t,!0).event(e),l=Dt(e.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",h,!0),u=Rt(e,i),d=e.clientX,c=e.clientY;Gt(e.view),rr(e),a.mouse=[u,this.__zoom.invert(u)],Ho(this),a.start()}function f(e){if(ar(e),!a.moved){var t=e.clientX-d,n=e.clientY-c;a.moved=t*t+n*n>p}a.event(e).zoom("mouse",r(w(a.that.__zoom,a.mouse[0]=Rt(e,i),a.mouse[1]),a.extent,s))}function h(e){l.on("mousemove.zoom mouseup.zoom",null),Lt(e.view,a.moved),ar(e),a.event(e).end()}}function M(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Rt(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),c=r(w(y(n,u),a,l),i.apply(this,t),s);ar(e),d>0?Dt(this).transition().duration(d).call(x,c,a,e):Dt(this).call(m.transform,c,a,e)}}function k(n,...i){if(o.apply(this,arguments)){var r,a,l,u,s=n.touches,d=s.length,c=_(this,i,n.changedTouches.length===d).event(n);for(rr(n),a=0;a<d;++a)l=s[a],u=Rt(l,this),u=[u,this.__zoom.invert(u),l.identifier],c.touch0?c.touch1||c.touch0[2]===u[2]||(c.touch1=u,c.taps=0):(c.touch0=u,r=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(c.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),h)),Ho(this),c.start())}}function C(e,...t){if(this.__zooming){var n,o,i,a,l=_(this,t).event(e),u=e.changedTouches,d=u.length;for(ar(e),n=0;n<d;++n)o=u[n],i=Rt(o,this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=i:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=i);if(o=l.that.__zoom,l.touch1){var c=l.touch0[0],f=l.touch0[1],h=l.touch1[0],v=l.touch1[1],p=(p=h[0]-c[0])*p+(p=h[1]-c[1])*p,g=(g=v[0]-f[0])*g+(g=v[1]-f[1])*g;o=y(o,Math.sqrt(p/g)),i=[(c[0]+h[0])/2,(c[1]+h[1])/2],a=[(f[0]+v[0])/2,(f[1]+v[1])/2]}else{if(!l.touch0)return;i=l.touch0[0],a=l.touch0[1]}l.zoom("touch",r(w(o,i,a),l.extent,s))}}function I(e,...o){if(this.__zooming){var i,r,a=_(this,o).event(e),l=e.changedTouches,u=l.length;for(rr(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),i=0;i<u;++i)r=l[i],a.touch0&&a.touch0[2]===r.identifier?delete a.touch0:a.touch1&&a.touch1[2]===r.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(r=Rt(r,this),Math.hypot(t[0]-r[0],t[1]-r[1])<g)){var s=Dt(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",sr),e!==i?x(e,t,n,o):i.interrupt().each((function(){_(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){var e=this.__zoom.k,n="function"===typeof t?t.apply(this,arguments):t;return e*n}),n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,a=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"===typeof t?t.apply(this,arguments):t;return r(w(y(o,u),a,l),e,s)}),n,o)},m.translateBy=function(e,t,n,o){m.transform(e,(function(){return r(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),s)}),null,o)},m.translateTo=function(e,t,n,o,a){m.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,l=null==o?b(e):"function"===typeof o?o.apply(this,arguments):o;return r(ir.translate(l[0],l[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Dt(this.that).datum();f.call(e,this.that,new nr(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:tr(+e),m):a},m.filter=function(e){return arguments.length?(o="function"===typeof e?e:tr(!!e),m):o},m.touchable=function(e){return arguments.length?(l="function"===typeof e?e:tr(!!e),m):l},m.extent=function(e){return arguments.length?(i="function"===typeof e?e:tr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(e){return arguments.length?(r=e,m):r},m.duration=function(e){return arguments.length?(d=+e,m):d},m.interpolate=function(e){return arguments.length?(c=e,m):c},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}or.prototype;var vr=(e=>(e["Left"]="left",e["Top"]="top",e["Right"]="right",e["Bottom"]="bottom",e))(vr||{}),pr=(e=>(e["Partial"]="partial",e["Full"]="full",e))(pr||{}),gr=(e=>(e["Bezier"]="default",e["SimpleBezier"]="simple-bezier",e["Straight"]="straight",e["Step"]="step",e["SmoothStep"]="smoothstep",e))(gr||{}),mr=(e=>(e["Strict"]="strict",e["Loose"]="loose",e))(mr||{}),yr=(e=>(e["Arrow"]="arrow",e["ArrowClosed"]="arrowclosed",e))(yr||{}),wr=(e=>(e["Free"]="free",e["Vertical"]="vertical",e["Horizontal"]="horizontal",e))(wr||{});function br(){return"undefined"!==typeof window?window:{chrome:!1,addEventListener(...e){}}}function xr(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,i="function"===typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),r="function"===typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||i||!!r}function _r(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Er(e,t,n,o){const i=t.split("+").map((e=>e.trim().toLowerCase()));return 1===i.length?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===i[t])))}function Sr(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=Nr(n.code,e);return Array.isArray(e)?e.some((e=>Er(n[o],e,t,"keyup"===n.type))):Er(n[o],e,t,"keyup"===n.type)}}function Nr(e,t){return"string"===typeof t?e===t?"code":"key":t.includes(e)?"code":"key"}function Mr(e,t,n={actInsideInputWithModifier:!0}){const r=br(),a=(0,o.KR)(!0===(0,o.BA)(e));let l=!1;const u=new Set;let s=c((0,o.BA)(e));return(0,i.wB)(a,((e,n)=>{e!==n&&(null==t||t(e))})),(0,i.wB)((()=>(0,o.BA)(e)),((e,t)=>{"boolean"===typeof t&&"boolean"!==typeof e&&d(),s=c(e)}),{immediate:!0}),S(r,"blur",(()=>{!0!==(0,o.BA)(e)&&(a.value=!1)})),M(((...e)=>s(...e)),(e=>{l=_r(e);const t=(!l||l&&!n.actInsideInputWithModifier)&&xr(e);t||(e.preventDefault(),a.value=!0)}),{eventName:"keydown"}),M(((...e)=>s(...e)),(e=>{if(a.value){const t=(!l||l&&!n.actInsideInputWithModifier)&&xr(e);if(t)return;d()}}),{eventName:"keyup"}),a;function d(){l=!1,u.clear(),a.value=!1}function c(e){return null===e?(d(),()=>!1):"boolean"===typeof e?(d(),a.value=e,()=>!1):Array.isArray(e)||"string"===typeof e?Sr(e,u):e}}const kr="vue-flow__node-desc",Cr="vue-flow__edge-desc",Ir="vue-flow__aria-live",Tr=["Enter"," ","Escape"],Ar={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Pr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:a,nodes:l,nodeExtent:u,nodeDragThreshold:s,viewport:d,autoPanOnNodeDrag:c,nodesDraggable:f,panBy:h,findNode:v,multiSelectionActive:p,nodesSelectionActive:g,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:w,updateNodePositions:b,emits:x}=_u(),{onStart:_,onDrag:E,onStop:S,el:N,disabled:M,id:k,selectable:C,dragHandle:I}=e,T=(0,o.KR)(!1);let A,P=[],B=null,D={x:void 0,y:void 0},$={x:0,y:0},R=null,O=!1,z=0,V=!1;const X=Gr(),G=({x:e,y:t})=>{D={x:e,y:t};let o=!1;if(P=P.map((i=>{const a={x:e-i.distance.x,y:t-i.distance.y};n.value&&(a.x=r.value[0]*Math.round(a.x/r.value[0]),a.y=r.value[1]*Math.round(a.y/r.value[1]));const{computedPosition:l}=Ua(i,a,x.error,u.value,i.parentNode?v(i.parentNode):void 0);return o=o||i.position.x!==l.x||i.position.y!==l.y,i.position=l,i})),o&&(b(P,!0,!0),T.value=!0,R)){const[e,t]=Ya({id:k,dragItems:P,findNode:v});E({event:R,node:e,nodes:t})}},L=()=>{if(!B)return;const[e,t]=Pa($,B);if(0!==e||0!==t){const n={x:(D.x??0)-e/d.value.zoom,y:(D.y??0)-t/d.value.zoom};h({x:e,y:t})&&G(n)}z=requestAnimationFrame(L)},Y=(e,t)=>{O=!0;const n=v(k);m.value||p.value||!n||n.selected||y(),n&&(0,o.BA)(C)&&m.value&&ml(n,p.value,w,y,g,!1,t);const i=X(e);if(D=i,P=La(l.value,f.value,i,v,k),P.length){const[t,n]=Ya({id:k,dragItems:P,findNode:v});_({event:e.sourceEvent,node:t,nodes:n})}},H=(e,n)=>{var o;0===s.value&&Y(e,n),D=X(e),B=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,$=il(e.sourceEvent,B)},F=(e,t)=>{const n=X(e);if(!V&&O&&c.value&&(V=!0,L()),!O){const o=n.xSnapped-(D.x??0),i=n.ySnapped-(D.y??0),r=Math.sqrt(o*o+i*i);r>s.value&&Y(e,t)}(D.x!==n.xSnapped||D.y!==n.ySnapped)&&P.length&&O&&(R=e.sourceEvent,$=il(e.sourceEvent,B),G(n))},W=e=>{if(O&&(T.value=!1,V=!1,O=!1,cancelAnimationFrame(z),P.length)){b(P,!1,!1);const[t,n]=Ya({id:k,dragItems:P,findNode:v});S({event:e.sourceEvent,node:t,nodes:n})}};return(0,i.wB)([()=>(0,o.BA)(M),N],(([e,t],n,i)=>{if(t){const n=Dt(t);e||(A=Zt().on("start",(e=>H(e,t))).on("drag",(e=>F(e,t))).on("end",(e=>W(e))).filter((e=>{const n=e.target,i=(0,o.BA)(I);return!e.button&&(!a.value||!Ga(n,`.${a.value}`,t)&&(!i||Ga(n,i,t)))})),n.call(A)),i((()=>{n.on(".drag",null),A&&(A.on("start",null),A.on("drag",null),A.on("end",null))}))}})),T}const Br=Symbol("vueFlow"),Dr=Symbol("nodeId"),$r=Symbol("nodeRef"),Rr=Symbol("edgeId"),Or=Symbol("edgeRef"),zr=Symbol("slots");function Vr(){return{doubleClick:Xa(),click:Xa(),mouseEnter:Xa(),mouseMove:Xa(),mouseLeave:Xa(),contextMenu:Xa(),updateStart:Xa(),update:Xa(),updateEnd:Xa()}}function Xr(e,t){const n=Vr();return n.doubleClick.on((n=>{var o,i;t.edgeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.edgeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.edgeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.edgeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.edgeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.edgeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.updateStart.on((n=>{var o,i;t.edgeUpdateStart(n),null==(i=null==(o=e.events)?void 0:o.updateStart)||i.call(o,n)})),n.update.on((n=>{var o,i;t.edgeUpdate(n),null==(i=null==(o=e.events)?void 0:o.update)||i.call(o,n)})),n.updateEnd.on((n=>{var o,i;t.edgeUpdateEnd(n),null==(i=null==(o=e.events)?void 0:o.updateEnd)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Gr(){const{viewport:e,snapGrid:t,snapToGrid:n}=_u();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,r=o.touches?o.touches[0].clientY:o.clientY,a={x:(i-e.value.x)/e.value.zoom,y:(r-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function Lr(){return!0}function Yr({handleId:e,nodeId:t,type:n,isValidConnection:i,edgeUpdaterType:r,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const{vueFlowRef:u,connectionMode:s,connectionRadius:d,connectOnClick:c,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:v,findNode:p,panBy:g,startConnection:m,updateConnection:y,endConnection:w,emits:b,viewport:x,edges:_,nodes:E,isValidConnection:S}=_u();let N=null,M=!1,k=null;function C(c){var f;const h="target"===(0,o.BA)(n),C=ol(c),I=aa(c.target);if(C&&0===c.button||!C){let n=function(n){X=il(n,z);const{handle:i,validHandleResult:r}=sl(n,I,ba(X,x.value,!1,[1,1]),d.value,L,(i=>dl(n,i,s.value,(0,o.BA)(t),(0,o.BA)(e),h?"target":"source",P,I,_.value,E.value,p)));if(A=i,G||(Y(),G=!0),N=r.connection,M=r.isValid,k=r.handleDomNode,y(A&&M?wa({x:A.x,y:A.y},x.value):X,r.endHandle,hl(!!A,M)),!A&&!M&&!k)return ll(V);N&&N.source!==N.target&&k&&(ll(V),V=k,k.classList.add("connecting","vue-flow__handle-connecting"),k.classList.toggle("valid",M),k.classList.toggle("vue-flow__handle-valid",M))},C=function(e){(A||k)&&N&&M&&(a?a(e,N):b.connect(N)),b.connectEnd(e),r&&(null==l||l(e)),ll(V),cancelAnimationFrame(B),w(e),G=!1,M=!1,N=null,k=null,I.removeEventListener("mousemove",n),I.removeEventListener("mouseup",C),I.removeEventListener("touchmove",n),I.removeEventListener("touchend",C)};const T=p((0,o.BA)(t));let A,P=(0,o.BA)(i)||S.value||Lr;!P&&T&&(P=(h?T.isValidSourcePos:T.isValidTargetPos)||Lr);let B=0;const{x:D,y:$}=il(c),R=null==I?void 0:I.elementFromPoint(D,$),O=fl((0,o.BA)(r),R),z=null==(f=u.value)?void 0:f.getBoundingClientRect();if(!z||!O)return;let V,X=il(c,z),G=!1;const L=cl({nodes:E.value,nodeId:(0,o.BA)(t),handleId:(0,o.BA)(e),handleType:O}),Y=()=>{if(!v)return;const[e,t]=Pa(X,z);g({x:e,y:t}),B=requestAnimationFrame(Y)};m({nodeId:(0,o.BA)(t),handleId:(0,o.BA)(e),type:O},{x:D-z.left,y:$-z.top},c),b.connectStart({event:c,nodeId:(0,o.BA)(t),handleId:(0,o.BA)(e),handleType:O}),I.addEventListener("mousemove",n),I.addEventListener("mouseup",C),I.addEventListener("touchmove",n),I.addEventListener("touchend",C)}}function I(r){if(!c.value)return;const a="target"===(0,o.BA)(n);if(f.value){let l=(0,o.BA)(i)||S.value||Lr;const u=p((0,o.BA)(t));if(!l&&u&&(l=(a?u.isValidSourcePos:u.isValidTargetPos)||Lr),u&&!1===("undefined"===typeof u.connectable?h.value:u.connectable))return;const d=aa(r.target),{connection:c,isValid:v}=dl(r,{nodeId:(0,o.BA)(t),id:(0,o.BA)(e),type:(0,o.BA)(n)},s.value,f.value.nodeId,f.value.handleId||null,f.value.type,l,d,_.value,E.value,p),g=c.source===c.target;v&&!g&&b.connect(c),b.clickConnectEnd(r),w(r,!0)}else b.clickConnectStart({event:r,nodeId:(0,o.BA)(t),handleId:(0,o.BA)(e)}),m({nodeId:(0,o.BA)(t),type:(0,o.BA)(n),handleId:(0,o.BA)(e)},void 0,r,!0)}return{handlePointerDown:C,handleClick:I}}function Hr(){return(0,i.WQ)(Dr,"")}function Fr(e){const t=e??Hr()??"",n=(0,i.WQ)($r,(0,o.KR)(null)),{findNode:r,edges:a,emits:l}=_u(),u=r(t);return u||l.error(new nl(el.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:u,parentNode:(0,i.EW)((()=>r(u.parentNode))),connectedEdges:(0,i.EW)((()=>Ma([u],a.value)))}}function Wr(){return{doubleClick:Xa(),click:Xa(),mouseEnter:Xa(),mouseMove:Xa(),mouseLeave:Xa(),contextMenu:Xa(),dragStart:Xa(),drag:Xa(),dragStop:Xa()}}function Kr(e,t){const n=Wr();return n.doubleClick.on((n=>{var o,i;t.nodeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)})),n.click.on((n=>{var o,i;t.nodeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)})),n.mouseEnter.on((n=>{var o,i;t.nodeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)})),n.mouseMove.on((n=>{var o,i;t.nodeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)})),n.mouseLeave.on((n=>{var o,i;t.nodeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)})),n.contextMenu.on((n=>{var o,i;t.nodeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)})),n.dragStart.on((n=>{var o,i;t.nodeDragStart(n),null==(i=null==(o=e.events)?void 0:o.dragStart)||i.call(o,n)})),n.drag.on((n=>{var o,i;t.nodeDrag(n),null==(i=null==(o=e.events)?void 0:o.drag)||i.call(o,n)})),n.dragStop.on((n=>{var o,i;t.nodeDragStop(n),null==(i=null==(o=e.events)?void 0:o.dragStop)||i.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Ur(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:l}=_u();return(u,s=!1)=>{const d=r.value?i.value[0]:5,c=r.value?i.value[1]:5,f=s?4:1,h=u.x*d*f,v=u.y*c*f,p=e.value.filter((e=>e.draggable||a&&"undefined"===typeof e.draggable)).map((e=>{const n={x:e.computedPosition.x+h,y:e.computedPosition.y+v},{computedPosition:i}=Ua(e,n,l.error,t.value,e.parentNode?o(e.parentNode):void 0);return{id:e.id,position:i,from:e.position,distance:{x:u.x,y:u.y},dimensions:e.dimensions}}));n(p,!0,!1)}}const Zr=.1;function jr(){return pl("Viewport not initialized yet."),Promise.resolve(!1)}const qr={zoomIn:jr,zoomOut:jr,zoomTo:jr,fitView:jr,setCenter:jr,fitBounds:jr,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:jr,setTransform:jr,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Qr(e){function t(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Jr(e.d3Selection,n,(()=>{o(!0)})),t):o(!1)}))}function n(t,n,o,i){return new Promise((r=>{const{x:a,y:l}=ra({x:-t,y:-n},e.translateExtent),u=ir.translate(-a,-l).scale(o);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Jr(e.d3Selection,i,(()=>{r(!0)})),u):r(!1)}))}return(0,i.EW)((()=>{const o=e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height;return o?{viewportInitialized:!0,zoomIn:e=>t(1.2,null==e?void 0:e.duration),zoomOut:e=>t(1/1.2,null==e?void 0:e.duration),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Jr(e.d3Selection,null==n?void 0:n.duration,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),setTransform:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:Zr,includeHiddenNodes:!1,duration:0})=>{const o=e.nodes.filter((e=>{var n;const o=e.dimensions.width&&e.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!e.hidden);return(null==(n=t.nodes)?void 0:n.length)?o&&t.nodes.includes(e.id):o}));if(!o.length)return Promise.resolve(!1);const i=Sa(o),{x:r,y:a,zoom:l}=ka(i,e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??Zr,t.offset);return n(r,a,l,null==t?void 0:t.duration)},setCenter:(t,o,i)=>{const r="undefined"!==typeof(null==i?void 0:i.zoom)?i.zoom:e.maxZoom,a=e.dimensions.width/2-t*r,l=e.dimensions.height/2-o*r;return n(a,l,r,null==i?void 0:i.duration)},fitBounds:(t,o={padding:Zr})=>{const{x:i,y:r,zoom:a}=ka(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding);return n(i,r,a,null==o?void 0:o.duration)},project:t=>ba(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect(),i={x:t.x-n,y:t.y-o};return ba(i,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect(),i={x:t.x+n,y:t.y+o};return wa(i,e.viewport)}return{x:0,y:0}}}:qr}))}function Jr(e,t=0,n){return e.transition().duration(t).on("end",n)}function ea(e,t,n){const r=(0,o.uY)(!0);return r.run((()=>{const a=()=>{r.run((()=>{let t,r,a=!(!n.nodes.value.length&&!n.edges.value.length);t=y([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),n.setElements(e),r||a||!e.length?null==r||r.resume():a=!0)})),r=y([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var r;(null==(r=e.modelValue)?void 0:r.value)&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],(0,i.dY)((()=>{null==t||t.resume()})))}),{immediate:a}),(0,o.jr)((()=>{null==t||t.stop(),null==r||r.stop()}))}))},l=()=>{r.run((()=>{let t,r,a=!!n.nodes.value.length;t=y([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),n.setNodes(e),r||a||!e.length?null==r||r.resume():a=!0)})),r=y([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;(null==(o=e.nodes)?void 0:o.value)&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],(0,i.dY)((()=>{null==t||t.resume()})))}),{immediate:a}),(0,o.jr)((()=>{null==t||t.stop(),null==r||r.stop()}))}))},u=()=>{r.run((()=>{let t,r,a=!!n.edges.value.length;t=y([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==r||r.pause(),n.setEdges(e),r||a||!e.length?null==r||r.resume():a=!0)})),r=y([n.edges,()=>n.edges.value.length],(([n])=>{var o;(null==(o=e.edges)?void 0:o.value)&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],(0,i.dY)((()=>{null==t||t.resume()})))}),{immediate:a}),(0,o.jr)((()=>{null==t||t.stop(),null==r||r.stop()}))}))},s=()=>{r.run((()=>{(0,i.wB)((()=>t.maxZoom),(()=>{t.maxZoom&&yl(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:!0})}))},d=()=>{r.run((()=>{(0,i.wB)((()=>t.minZoom),(()=>{t.minZoom&&yl(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:!0})}))},c=()=>{r.run((()=>{(0,i.wB)((()=>t.translateExtent),(()=>{t.translateExtent&&yl(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}),{immediate:!0})}))},f=()=>{r.run((()=>{(0,i.wB)((()=>t.nodeExtent),(()=>{t.nodeExtent&&yl(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}),{immediate:!0})}))},h=()=>{r.run((()=>{(0,i.wB)((()=>t.applyDefault),(()=>{yl(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:!0})}))},v=()=>{r.run((()=>{const e=async e=>{let o=e;"function"===typeof t.autoConnect&&(o=await t.autoConnect(e)),!1!==o&&n.addEdges([o])};(0,i.wB)((()=>t.autoConnect),(()=>{yl(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:!0}),(0,i.wB)(n.autoConnect,((t,o,i)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),i((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})}))},p=()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const a of Object.keys(t)){const l=a;if(!e.includes(l)){const e=(0,o.lW)((()=>t[l])),a=n[l];(0,o.i9)(a)&&r.run((()=>{(0,i.wB)(e,(e=>{yl(e)&&(a.value=e)}),{immediate:!0,flush:"pre"})}))}}},g=()=>{a(),l(),u(),d(),s(),c(),f(),h(),v(),p()};g()})),()=>r.stop()}function ta(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function na(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function oa(e){return{width:e.offsetWidth,height:e.offsetHeight}}function ia(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ra(e,t){return{x:ia(e.x,t[0][0],t[1][0]),y:ia(e.y,t[0][1],t[1][1])}}function aa(e){const t=e.getRootNode();if("elementFromPoint"in t)return t;const n=br();return n.document}function la(e){return e&&"object"===typeof e&&"id"in e&&"source"in e&&"target"in e}function ua(e){return e&&"object"===typeof e&&"id"in e&&"position"in e&&!la(e)}function sa(e){return ua(e)&&"computedPosition"in e}function da(e){return!Number.isNaN(e)&&Number.isFinite(e)}function ca(e){return da(e.width)&&da(e.height)&&da(e.x)&&da(e.y)}function fa(e,t,n){const i={id:e.id.toString(),type:e.type??"default",dimensions:(0,o.IG)({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:(0,o.IG)({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:yl(e.data)?e.data:{},events:(0,o.IG)(yl(e.events)?e.events:{})};return Object.assign(t??i,e,{id:e.id.toString(),parentNode:n})}function ha(e,t,n){var i,r;const a={id:e.id.toString(),type:e.type??(null==t?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(i=e.sourceHandle)?void 0:i.toString(),targetHandle:null==(r=e.targetHandle)?void 0:r.toString(),updatable:e.updatable??(null==n?void 0:n.updatable),selectable:e.selectable??(null==n?void 0:n.selectable),focusable:e.focusable??(null==n?void 0:n.focusable),data:yl(e.data)?e.data:{},events:(0,o.IG)(yl(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(null==n?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function va(e,t,n,o){const i="string"===typeof e?e:e.id,r=new Set,a="source"===o?"target":"source";for(const l of n)l[a]===i&&r.add(l[o]);return t.filter((e=>r.has(e.id)))}function pa(...e){if(3===e.length){const[t,n,o]=e;return va(t,n,o,"target")}const[t,n]=e,o="string"===typeof t?t:t.id,i=n.filter((e=>la(e)&&e.source===o));return i.map((e=>n.find((t=>ua(t)&&t.id===e.target))))}function ga(...e){if(3===e.length){const[t,n,o]=e;return va(t,n,o,"source")}const[t,n]=e,o="string"===typeof t?t:t.id,i=n.filter((e=>la(e)&&e.target===o));return i.map((e=>n.find((t=>ua(t)&&t.id===e.source))))}function ma({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function ya(e,t){return t.some((t=>la(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}function wa({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function ba({x:e,y:t},{x:n,y:o,zoom:i},r,[a,l]){const u={x:(e-n)/i,y:(t-o)/i};return r?{x:a*Math.round(u.x/a),y:l*Math.round(u.y/l)}:u}function xa(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function _a({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ea({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Sa(e){const t=e.reduce(((e,{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0}}={})=>xa(e,_a({...t,...n}))),{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY});return Ea(t)}function Na(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},r=!1,a=!1){const l={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter((e=>{const{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0},selectable:o}=e;if(a&&!o)return!1;const i={...t,width:n.width||0,height:n.height||0},u=na(l,i),s="undefined"===typeof n.width||"undefined"===typeof n.height||0===n.width||0===n.height,d=r&&u>0,c=n.width*n.height;return s||d||u>=c}))}function Ma(e,t){const n=new Set;if("string"===typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function ka(e,t,n,o,i,r=.1,a={x:0,y:0}){const l=t/(e.width*(1+r)),u=n/(e.height*(1+r)),s=Math.min(l,u),d=ia(s,o,i),c=e.x+e.width/2,f=e.y+e.height/2,h=t/2-c*d+(a.x??0),v=n/2-f*d+(a.y??0);return{x:h,y:v,zoom:d}}function Ca(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ia(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||Ia(n,t))}function Ta(e,t){if("undefined"===typeof e)return"";if("string"===typeof e)return e;const n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function Aa(e,t,n){return e<t?ia(Math.abs(e-t),1,50)/50:e>n?-ia(Math.abs(e-n),1,50)/50:0}function Pa(e,t){const n=20*Aa(e.x,35,t.width-35),o=20*Aa(e.y,35,t.height-35);return[n,o]}function Ba(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if("function"===typeof t.style?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if("string"===typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;if(o>0)if("string"===typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+o}px`}else i.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"===typeof i.width){const e=Number(i.width.replace("px",""));i.width=`${e+n}px`}else i.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"===typeof i.height){const e=Number(i.height.replace("px",""));i.height=`${e+n}px`}else i.height+=n;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),"function"===typeof t.style?t.style=e=>{const n=t.style;return{...n(e),...i}}:t.style={...t.style,...i}}}}function Da(e,t){var n,o;const r=e.filter((e=>"add"===e.type||"remove"===e.type));for(const i of r)if("add"===i.type){const e=t.findIndex((e=>e.id===i.item.id));-1===e&&t.push(i.item)}else if("remove"===i.type){const e=t.findIndex((e=>e.id===i.id));-1!==e&&t.splice(e,1)}const a=t.map((e=>e.id));for(const l of t){const r=e.filter((e=>e.id===l.id));for(const e of r)switch(e.type){case"select":l.selected=e.selected;break;case"position":if(sa(l)&&("undefined"!==typeof e.position&&(l.position=e.position),"undefined"!==typeof e.dragging&&(l.dragging=e.dragging),l.expandParent&&l.parentNode)){const e=t[a.indexOf(l.parentNode)];e&&sa(e)&&Ba(l,e)}break;case"dimensions":if(sa(l)){if("undefined"!==typeof e.dimensions&&(l.dimensions=e.dimensions),"undefined"!==typeof e.updateStyle&&(l.style={...l.style||{},width:`${null==(n=e.dimensions)?void 0:n.width}px`,height:`${null==(o=e.dimensions)?void 0:o.height}px`}),"undefined"!==typeof e.resizing&&(l.resizing=e.resizing),l.expandParent&&l.parentNode){const e=t[a.indexOf(l.parentNode)];e&&sa(e)&&(e.initialized?Ba(l,e):(0,i.dY)((()=>{Ba(l,e)})))}l.initialized||(l.initialized=!0)}break}}return t}function $a(e,t){return{id:e,type:"select",selected:t}}function Ra(e){return{item:e,type:"add"}}function Oa(e){return{id:e,type:"remove"}}function za(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function Va(e,t){return e.reduce(((e,n)=>{let o=t.includes(n.id);yl(n.selectable)&&!n.selectable&&(o=!1);const i=sa(n)?"changedNodes":"changedEdges";return!n.selected&&o?e[i].push($a(n.id,!0)):n.selected&&!o&&e[i].push($a(n.id,!1)),e}),{changedNodes:[],changedEdges:[]})}function Xa(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=e=>{t.delete(e)},r=o=>{e&&n&&t.delete(e),t.add(o);const r=()=>{i(o),e&&n&&t.add(e)};return a(r),{off:r}},l=e=>Promise.all(Array.from(t).map((t=>t(e))));return{on:r,off:i,trigger:l,hasListeners:o,fns:t}}function Ga(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function La(e,t,n,i,r){return e.filter((e=>(e.selected||e.id===r)&&(!e.parentNode||!Ia(e,i))&&(e.draggable||t&&"undefined"===typeof e.draggable))).map((e=>{var t,i;return(0,o.IG)({id:e.id,position:e.position||{x:0,y:0},distance:{x:n.x-(null==(t=e.computedPosition)?void 0:t.x)||0,y:n.y-(null==(i=e.computedPosition)?void 0:i.y)||0},from:e.computedPosition,extent:e.extent,parentNode:e.parentNode,dimensions:e.dimensions,expandParent:e.expandParent})}))}function Ya({id:e,dragItems:t,findNode:n}){const o=t.reduce(((e,t)=>{const o=n(t.id);return o&&e.push(o),e}),[]);return[e?o.find((t=>t.id===e)):o[0],o]}function Ha(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Fa(e,t,n){const[o,i,r,a]="string"!==typeof e?Ha(e.padding):[0,0,0,0];return!(!n||"undefined"===typeof n.computedPosition.x||"undefined"===typeof n.computedPosition.y||"undefined"===typeof n.dimensions.width||"undefined"===typeof n.dimensions.height)&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]}function Wa(e,t,n,o){let i=e.extent||n;if("parent"!==i&&(Array.isArray(i)||"parent"!==(null==i?void 0:i.range))||e.expandParent){if(Array.isArray(i)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;i=[[i[0][0]+e,i[0][1]+t],[i[1][0]+e,i[1][1]+t]]}else if("parent"!==i&&(null==i?void 0:i.range)&&Array.isArray(i.range)){const[e,t,n,r]=Ha(i.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+a+r,i.range[0][1]+l+e],[i.range[1][0]+a-t,i.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const t=Fa(i,e,o);t&&(i=t)}else t(new nl(el.NODE_EXTENT_INVALID,e.id)),i=n;return"parent"===i?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Ka({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ua(e,t,n,o,i){const r=Ka(e.dimensions,Wa(e,n,o,i)),a=ra(t,r);return{position:{x:a.x-((null==i?void 0:i.computedPosition.x)||0),y:a.y-((null==i?void 0:i.computedPosition.y)||0)},computedPosition:a}}function Za(e,t,n){const o=((null==n?void 0:n.x)??0)+t.x,i=((null==n?void 0:n.y)??0)+t.y,r=(null==n?void 0:n.width)??t.width,a=(null==n?void 0:n.height)??t.height;switch(e){case vr.Top:return{x:o+r/2,y:i};case vr.Right:return{x:o+r,y:i+a/2};case vr.Bottom:return{x:o+r/2,y:i+a};case vr.Left:return{x:o,y:i+a/2}}}function ja(e=[],t){return e.length&&(t?e.find((e=>e.id===t)):e[0])||null}function qa(e,t,n,o,i,r){const a=Za(n,{...e.dimensions,...e.computedPosition},t),l=Za(r,{...o.dimensions,...o.computedPosition},i);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}}function Qa({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const d=_a({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),c=Math.max(0,Math.min(d.x2,s.x2)-Math.max(d.x,s.x)),f=Math.max(0,Math.min(d.y2,s.y2)-Math.max(d.y,s.y)),h=Math.ceil(c*f);return h>0}function Ja(e,t,n=!1){const o="number"===typeof e.zIndex;let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return r&&a?(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i):0}var el=(e=>(e["MISSING_VIEWPORT_DIMENSIONS"]="MISSING_VIEWPORT_DIMENSIONS",e["NODE_INVALID"]="NODE_INVALID",e["NODE_NOT_FOUND"]="NODE_NOT_FOUND",e["NODE_MISSING_PARENT"]="NODE_MISSING_PARENT",e["NODE_TYPE_MISSING"]="NODE_TYPE_MISSING",e["NODE_EXTENT_INVALID"]="NODE_EXTENT_INVALID",e["EDGE_INVALID"]="EDGE_INVALID",e["EDGE_NOT_FOUND"]="EDGE_NOT_FOUND",e["EDGE_SOURCE_MISSING"]="EDGE_SOURCE_MISSING",e["EDGE_TARGET_MISSING"]="EDGE_TARGET_MISSING",e["EDGE_TYPE_MISSING"]="EDGE_TYPE_MISSING",e["EDGE_SOURCE_TARGET_SAME"]="EDGE_SOURCE_TARGET_SAME",e["EDGE_SOURCE_TARGET_MISSING"]="EDGE_SOURCE_TARGET_MISSING",e["EDGE_ORPHANED"]="EDGE_ORPHANED",e))(el||{});const tl={["MISSING_VIEWPORT_DIMENSIONS"]:()=>"The Vue Flow parent container needs a width and a height to render the graph",["NODE_INVALID"]:e=>`Node is invalid\nNode: ${e}`,["NODE_NOT_FOUND"]:e=>`Node not found\nNode: ${e}`,["NODE_MISSING_PARENT"]:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,["NODE_TYPE_MISSING"]:e=>`Node type is missing\nType: ${e}`,["NODE_EXTENT_INVALID"]:e=>`Only child nodes can use a parent extent\nNode: ${e}`,["EDGE_INVALID"]:e=>`An edge needs a source and a target\nEdge: ${e}`,["EDGE_SOURCE_MISSING"]:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,["EDGE_TARGET_MISSING"]:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,["EDGE_TYPE_MISSING"]:e=>`Edge type is missing\nType: ${e}`,["EDGE_SOURCE_TARGET_SAME"]:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,["EDGE_SOURCE_TARGET_MISSING"]:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,["EDGE_ORPHANED"]:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,["EDGE_NOT_FOUND"]:e=>`Edge not found\nEdge: ${e}`};class nl extends Error{constructor(e,...t){var n;super(null==(n=tl[e])?void 0:n.call(tl,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function ol(e){return"clientX"in e}function il(e,t){var n,o;const i=ol(e),r=i?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,a=i?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:r-((null==t?void 0:t.left)??0),y:a-((null==t?void 0:t.top)??0)}}const rl=()=>{var e;return"undefined"!==typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function al(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function ll(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ul(e,t,n,o){return(t[n]||[]).reduce(((t,i)=>{var r,a;return`${e.id}-${i.id}-${n}`!==o&&t.push({id:i.id||null,type:n,nodeId:e.id,x:((null==(r=e.computedPosition)?void 0:r.x)??0)+i.x+i.width/2,y:((null==(a=e.computedPosition)?void 0:a.y)??0)+i.y+i.height/2,width:i.width,height:i.height}),t}),[])}function sl(e,t,n,o,i,r){const{x:a,y:l}=il(e),u=t.elementsFromPoint(a,l),s=u.find((e=>e.classList.contains("vue-flow__handle")));if(s){const e=s.getAttribute("data-nodeid");if(e){const t=fl(void 0,s),o=s.getAttribute("data-handleid"),a=r({nodeId:e,id:o,type:t});if(a){const r=i.find((n=>n.nodeId===e&&n.type===t&&n.id===o));return{handle:{id:o,type:t,nodeId:e,x:(null==r?void 0:r.x)||n.x,y:(null==r?void 0:r.y)||n.y},validHandleResult:a}}}}let d=[],c=Number.POSITIVE_INFINITY;for(const v of i){const e=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(e<=o){const t=r(v);e<=c&&(e<c?d=[{handle:v,validHandleResult:t}]:e===c&&d.push({handle:v,validHandleResult:t}),c=e)}}if(!d.length)return{handle:null,validHandleResult:al()};if(1===d.length)return d[0];const f=d.some((({validHandleResult:e})=>e.isValid)),h=d.some((({handle:e})=>"target"===e.type));return d.find((({handle:e,validHandleResult:t})=>h?"target"===e.type:!f||t.isValid))||d[0]}function dl(e,t,n,o,i,r,a,l,u,s,d){const c="target"===r,f=l.querySelector(`.vue-flow__handle[data-id="${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`),{x:h,y:v}=il(e),p=l.elementFromPoint(h,v),g=(null==p?void 0:p.classList.contains("vue-flow__handle"))?p:f,m=al();if(g){m.handleDomNode=g;const e=fl(void 0,g),t=g.getAttribute("data-nodeid"),r=g.getAttribute("data-handleid"),l=g.classList.contains("connectable"),f=g.classList.contains("connectableend"),h={source:c?t:o,sourceHandle:c?r:i,target:c?o:t,targetHandle:c?i:r};m.connection=h;const v=l&&f,p=v&&(n===mr.Strict?c&&"source"===e||!c&&"target"===e:t!==o||r!==i);m.endHandle={nodeId:t,handleId:r,type:e},p&&(m.isValid=a(h,{edges:u,nodes:s,sourceNode:d(h.source),targetNode:d(h.target)}))}return m}function cl({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce(((e,i)=>{const{handleBounds:r}=i;let a=[],l=[];return r&&(a=ul(i,r,"source",`${t}-${n}-${o}`),l=ul(i,r,"target",`${t}-${n}-${o}`)),e.push(...a,...l),e}),[])}function fl(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function hl(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const vl=["production","prod"];function pl(e,...t){vl.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function gl(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),r=t.getBoundingClientRect();return i.map((e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-r.left)/n,y:(t.top-r.top)/n,...oa(e)}}))}function ml(e,t,n,o,r,a=!1,l){r.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),(0,i.dY)((()=>{l.blur()}))):n([e])}function yl(e){const t=(0,o.R1)(e);return"undefined"!==typeof t}function wl(e,t,n,o){if(!e||!e.source||!e.target)return n(new nl(el.EDGE_INVALID,(null==e?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return i=la(e)?e:{...e,id:ma(e)},i=ha(i,void 0,o),!ya(i,t)&&i}function bl(e,t,n,o,i,r){if(!t.source||!t.target)return r(new nl(el.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return r(new nl(el.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...u}=e,s={...u,id:i?ma(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,s),s}function xl(e,t,n,o){const i={},r=e.reduce(((e,t,r)=>{if(!ua(t))return o(new nl(el.NODE_INVALID,null==t?void 0:t.id)||`[ID UNKNOWN|INDEX ${r}]`),e;const a=fa(t,n(t.id),t.parentNode);return t.parentNode&&(i[t.parentNode]=!0),e.concat(a)}),[]),a=[...r,...t];for(const l of r){const e=a.find((e=>e.id===l.parentNode));l.parentNode&&!e&&o(new nl(el.NODE_MISSING_PARENT,l.id,l.parentNode)),(l.parentNode||i[l.id])&&(i[l.id]&&(l.isParent=!0),e&&(e.isParent=!0))}return r}function _l(e,t){e.clear();for(const n of t){const{id:t,source:i,target:r,sourceHandle:a=null,targetHandle:l=null}=n,u=`${i}-source-${a}`,s=`${r}-target-${l}`,d=e.get(u)||new Map,c=e.get(s)||new Map,f=(0,o.IG)({edgeId:t,source:i,target:r,sourceHandle:a,targetHandle:l});e.set(u,d.set(`${r}-${l}`,f)),e.set(s,c.set(`${i}-${a}`,f))}}function El(e,t,n){if(!n)return;const o=[];for(const i of e.keys())t.has(i)||o.push(e.get(i));o.length&&n(o)}function Sl(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Nl(){return{edgesChange:Xa(),nodesChange:Xa(),nodeDoubleClick:Xa(),nodeClick:Xa(),nodeMouseEnter:Xa(),nodeMouseMove:Xa(),nodeMouseLeave:Xa(),nodeContextMenu:Xa(),nodeDragStart:Xa(),nodeDrag:Xa(),nodeDragStop:Xa(),nodesInitialized:Xa(),miniMapNodeClick:Xa(),miniMapNodeDoubleClick:Xa(),miniMapNodeMouseEnter:Xa(),miniMapNodeMouseMove:Xa(),miniMapNodeMouseLeave:Xa(),connect:Xa(),connectStart:Xa(),connectEnd:Xa(),clickConnectStart:Xa(),clickConnectEnd:Xa(),paneReady:Xa(),init:Xa(),move:Xa(),moveStart:Xa(),moveEnd:Xa(),selectionDragStart:Xa(),selectionDrag:Xa(),selectionDragStop:Xa(),selectionContextMenu:Xa(),selectionStart:Xa(),selectionEnd:Xa(),viewportChangeStart:Xa(),viewportChange:Xa(),viewportChangeEnd:Xa(),paneScroll:Xa(),paneClick:Xa(),paneContextMenu:Xa(),paneMouseEnter:Xa(),paneMouseMove:Xa(),paneMouseLeave:Xa(),edgeContextMenu:Xa(),edgeMouseEnter:Xa(),edgeMouseMove:Xa(),edgeMouseLeave:Xa(),edgeDoubleClick:Xa(),edgeClick:Xa(),edgeUpdateStart:Xa(),edgeUpdate:Xa(),edgeUpdateEnd:Xa(),updateNodeInternals:Xa(),error:Xa((e=>pl(e.message)))}}function Ml(e,t){(0,i.KC)((()=>{for(const[n,o]of Object.entries(t.value)){const t=t=>{e(n,t)};o.fns.add(t),a((()=>{o.off(t)}))}}))}function kl(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:pr.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:wr.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:gr.Bezier,style:{}},connectionMode:mr.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:rl()?"Meta":"Control",zoomActivationKeyCode:rl()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Nl(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Cl=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Il(e,t,n,o){const r=Qr(t),a=e=>{const o=e??n.value??[];t.hooks.updateNodeInternals.trigger(o)},l=e=>ga(e,t.nodes,t.edges),u=e=>pa(e,t.nodes,t.edges),s=e=>Ma(e,t.edges),d=e=>{if(e)return t.nodes&&!n.value.length?t.nodes.find((t=>t.id===e)):t.nodes[n.value.indexOf(e)]},c=e=>{if(e)return t.edges&&!o.value.length?t.edges.find((t=>t.id===e)):t.edges[o.value.indexOf(e)]},f=(e,n,o)=>{var i,r;const a=[];for(const t of e){const e={id:t.id,type:"position",dragging:o,from:t.from};if(n&&(e.position=t.position,t.parentNode)){const n=d(t.parentNode);e.position={x:e.position.x-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.x)??0),y:e.position.y-((null==(r=null==n?void 0:n.computedPosition)?void 0:r.y)??0)}}a.push(e)}(null==a?void 0:a.length)&&t.hooks.nodesChange.trigger(a)},h=e=>{if(!t.vueFlowRef)return;const n=t.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const o=window.getComputedStyle(n),{m22:a}=new window.DOMMatrixReadOnly(o.transform),l=e.reduce(((e,t)=>{const n=d(t.id);if(n){const o=oa(t.nodeElement),i=!(!o.width||!o.height||n.dimensions.width===o.width&&n.dimensions.height===o.height&&!t.forceUpdate);i&&(n.handleBounds.source=gl(".source",t.nodeElement,a),n.handleBounds.target=gl(".target",t.nodeElement,a),n.dimensions=o,n.initialized=!0,e.push({id:n.id,type:"dimensions",dimensions:o}))}return e}),[]);!t.fitViewOnInitDone&&t.fitViewOnInit&&(0,i.dY)((()=>{r.value.fitView(),t.fitViewOnInitDone=!0})),l.length&&t.hooks.nodesChange.trigger(l)},v=(e,n)=>{const o=e.map((e=>e.id));let i,r=[];if(t.multiSelectionActive)i=o.map((e=>$a(e,n)));else{const e=Va([...t.nodes,...t.edges],o);i=e.changedNodes,r=e.changedEdges}i.length&&t.hooks.nodesChange.trigger(i),r.length&&t.hooks.edgesChange.trigger(r)},p=(e,n)=>{const o=e.map((e=>e.id));let i,r=[];if(t.multiSelectionActive)i=o.map((e=>$a(e,n)));else{const e=Va([...t.nodes,...t.edges],o);r=e.changedNodes,i=e.changedEdges}r.length&&t.hooks.nodesChange.trigger(r),i.length&&t.hooks.edgesChange.trigger(i)},g=(e,n)=>{const o=e.filter(ua).map((e=>e.id)),i=e.filter(la).map((e=>e.id));let{changedNodes:r,changedEdges:a}=Va([...t.nodes,...t.edges],[...o,...i]);t.multiSelectionActive&&(r=o.map((e=>$a(e,n))),a=i.map((e=>$a(e,n)))),r.length&&t.hooks.nodesChange.trigger(r),a.length&&t.hooks.edgesChange.trigger(a)},m=e=>{v(e,!0)},y=e=>{p(e,!0)},w=e=>{g(e,!0)},b=e=>{if(!e.length)return v(e,!1);const n=e.map((e=>e.id)),o=n.map((e=>$a(e,!1)));o.length&&t.hooks.nodesChange.trigger(o)},_=e=>{if(!e.length)return p(e,!1);const n=e.map((e=>e.id)),o=n.map((e=>$a(e,!1)));o.length&&t.hooks.edgesChange.trigger(o)},E=e=>{if(!e||!e.length)return g([],!1);const n=e.reduce(((e,t)=>{const n=$a(t.id,!1);return ua(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&t.hooks.nodesChange.trigger(n.nodes),n.edges.length&&t.hooks.edgesChange.trigger(n.edges)},S=e=>{var n;null==(n=t.d3Zoom)||n.scaleExtent([e,t.maxZoom]),t.minZoom=e},N=e=>{var n;null==(n=t.d3Zoom)||n.scaleExtent([t.minZoom,e]),t.maxZoom=e},M=e=>{var n;null==(n=t.d3Zoom)||n.translateExtent(e),t.translateExtent=e},k=e=>{t.nodeExtent=e,a(n.value)},C=e=>{t.nodesDraggable=e,t.nodesConnectable=e,t.elementsSelectable=e},I=e=>{const n=e instanceof Function?e(t.nodes):e;(t.initialized||n.length)&&(t.nodes=xl(n,t.nodes,d,t.hooks.error.trigger))},T=e=>{const n=e instanceof Function?e(t.edges):e;if(!t.initialized&&!n.length)return;const o=t.isValidConnection?n.filter((e=>t.isValidConnection(e,{edges:t.edges,nodes:t.nodes,sourceNode:d(e.source),targetNode:d(e.target)}))):n;_l(t.connectionLookup,o),t.edges=o.reduce(((e,n)=>{const o=d(n.source),i=d(n.target),r=!o||"undefined"===typeof o,a=!i||"undefined"===typeof i;if(r&&a?t.hooks.error.trigger(new nl(el.EDGE_SOURCE_TARGET_MISSING,n.id,n.source,n.target)):(r&&t.hooks.error.trigger(new nl(el.EDGE_SOURCE_MISSING,n.id,n.source)),a&&t.hooks.error.trigger(new nl(el.EDGE_TARGET_MISSING,n.id,n.target))),r||a)return e;const l=c(n.id);return e.push({...ha(n,l,t.defaultEdgeOptions),sourceNode:o,targetNode:i}),e}),[])},A=e=>{const n=e instanceof Function?e([...t.nodes,...t.edges]):e;(t.initialized||n.length)&&(I(n.filter(ua)),T(n.filter(la)))},P=e=>{let n=e instanceof Function?e(t.nodes):e;n=Array.isArray(n)?n:[n];const o=xl(n,t.nodes,d,t.hooks.error.trigger),i=o.map(Ra);i.length&&t.hooks.nodesChange.trigger(i)},B=e=>{let n=e instanceof Function?e(t.edges):e;n=Array.isArray(n)?n:[n];const o=t.isValidConnection?n.filter((e=>{var n;return null==(n=t.isValidConnection)?void 0:n.call(t,e,{edges:t.edges,nodes:t.nodes,sourceNode:d(e.source),targetNode:d(e.target)})})):n,i=o.reduce(((e,n)=>{const o=wl(n,t.edges,t.hooks.error.trigger,t.defaultEdgeOptions);if(o){const t=d(o.source),n=d(o.target);e.push(Ra({...o,sourceNode:t,targetNode:n}))}return e}),[]);i.length&&t.hooks.edgesChange.trigger(i)},D=(e,n=!0,o=!1)=>{const i=e instanceof Function?e(t.nodes):e,r=Array.isArray(i)?i:[i],a=[],l=[];function u(e){const t=s(e).filter((e=>!yl(e.deletable)||e.deletable));l.push(...t.map((e=>za(e.id,e.source,e.target,e.sourceHandle,e.targetHandle))))}function c(e){const o=t.nodes.filter((t=>t.parentNode===e));if(o.length){const e=o.map((e=>e.id));a.push(...e.map((e=>Oa(e)))),n&&u(o);for(const t of o)c(t.id)}}for(const t of r){const e="string"===typeof t?d(t):t;e&&(yl(e.deletable)&&!e.deletable||(a.push(Oa(e.id)),n&&u([e]),o&&c(e.id)))}l.length&&t.hooks.edgesChange.trigger(l),a.length&&t.hooks.nodesChange.trigger(a)},$=e=>{const n=e instanceof Function?e(t.edges):e,o=Array.isArray(n)?n:[n],i=[];for(const t of o){const e="string"===typeof t?c(t):t;e&&(yl(e.deletable)&&!e.deletable||i.push(za("string"===typeof t?t:t.id,e.source,e.target,e.sourceHandle,e.targetHandle)))}t.hooks.edgesChange.trigger(i)},R=(e,n,o=!0)=>bl(e,n,t.edges,c,o,t.hooks.error.trigger),O=e=>Da(e,t.nodes),z=e=>{const n=Da(e,t.edges);return _l(t.connectionLookup,n),n},V=(e,n,o={replace:!1})=>{const i=d(e);if(!i)return;const r="function"===typeof n?n(i):n;o.replace?t.nodes.splice(t.nodes.indexOf(i),1,r):Object.assign(i,r)},X=(e,t,n={replace:!1})=>{V(e,(e=>{const o="function"===typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},G=(e,n,o,i=!1)=>{i?t.connectionClickStartHandle=e:t.connectionStartHandle=e,t.connectionEndHandle=null,t.connectionStatus=null,n&&(t.connectionPosition=n)},L=(e,n=null,o=null)=>{t.connectionStartHandle&&(t.connectionPosition=e,t.connectionEndHandle=n,t.connectionStatus=o)},Y=(e,n)=>{t.connectionPosition={x:Number.NaN,y:Number.NaN},t.connectionEndHandle=null,t.connectionStatus=null,n?t.connectionClickStartHandle=null:t.connectionStartHandle=null},H=e=>{const t=ca(e),n=t?null:sa(e)?e:d(e.id);if(!t&&!n)return[null,null,t];const o=t?e:ta(n);return[o,n,t]},F=(e,n=!0,o=t.nodes)=>{const[i,r,a]=H(e);return i?(o||t.nodes).filter((e=>{if(!a&&(e.id===r.id||!e.computedPosition))return!1;const t=ta(e),o=na(t,i),l=n&&o>0;return l||o>=Number(i.width)*Number(i.height)})):[]},W=(e,t,n=!0)=>{const[o]=H(e);if(!o)return!1;const i=na(o,t),r=n&&i>0;return r||i>=Number(o.width)*Number(o.height)},K=e=>{const{viewport:n,dimensions:o,d3Zoom:i,d3Selection:r,translateExtent:a}=t;if(!i||!r||!e.x&&!e.y)return!1;const l=ir.translate(n.x+e.x,n.y+e.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=i.constrain()(l,u,a),d=t.viewport.x!==s.x||t.viewport.y!==s.y||t.viewport.zoom!==s.k;return i.transform(r,s),d},U=e=>{const n=e instanceof Function?e(t):e,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];yl(n.defaultEdgeOptions)&&(t.defaultEdgeOptions=n.defaultEdgeOptions);const i=n.modelValue||n.nodes||n.edges?[]:void 0;i&&(n.modelValue&&i.push(...n.modelValue),n.nodes&&i.push(...n.nodes),n.edges&&i.push(...n.edges),A(i));const r=()=>{yl(n.maxZoom)&&N(n.maxZoom),yl(n.minZoom)&&S(n.minZoom),yl(n.translateExtent)&&M(n.translateExtent)};for(const a of Object.keys(n)){const e=a,i=n[e];![...Cl,...o].includes(e)&&yl(i)&&(t[e]=i)}x((()=>t.d3Zoom)).not.toBeNull().then(r),t.initialized||(t.initialized=!0)},Z=()=>JSON.parse(JSON.stringify({nodes:t.nodes.map((e=>{const{computedPosition:t,handleBounds:n,selected:o,dimensions:i,isParent:r,resizing:a,dragging:l,initialized:u,events:s,...d}=e;return d})),edges:t.edges.map((e=>{const{selected:t,sourceNode:n,targetNode:o,events:i,...r}=e;return r})),position:[t.viewport.x,t.viewport.y],zoom:t.viewport.zoom,viewport:t.viewport})),j=e=>new Promise((n=>{const{nodes:o,edges:i,position:a,zoom:l,viewport:u}=e;if(o&&I(o),i&&T(i),(null==u?void 0:u.x)&&(null==u?void 0:u.y)||a){const e=(null==u?void 0:u.x)||a[0],o=(null==u?void 0:u.y)||a[1],i=(null==u?void 0:u.zoom)||l||t.viewport.zoom;return x((()=>r.value.viewportInitialized)).toBe(!0).then((()=>{r.value.setViewport({x:e,y:o,zoom:i}).then((()=>{n(!0)}))}))}n(!0)})),q=()=>{const e=kl();if(t.edges=[],t.nodes=[],t.d3Zoom&&t.d3Selection){const n=ir.translate(e.defaultViewport.x??0,e.defaultViewport.y??0).scale(ia(e.defaultViewport.zoom??1,e.minZoom,e.maxZoom)),o=t.viewportRef.getBoundingClientRect(),i=[[0,0],[o.width,o.height]],r=t.d3Zoom.constrain()(n,i,e.translateExtent);t.d3Zoom.transform(t.d3Selection,r)}U(e)};return{updateNodePositions:f,updateNodeDimensions:h,setElements:A,setNodes:I,setEdges:T,addNodes:P,addEdges:B,removeNodes:D,removeEdges:$,findNode:d,findEdge:c,updateEdge:R,updateNode:V,updateNodeData:X,applyEdgeChanges:z,applyNodeChanges:O,addSelectedElements:w,addSelectedNodes:m,addSelectedEdges:y,setMinZoom:S,setMaxZoom:N,setTranslateExtent:M,setNodeExtent:k,removeSelectedElements:E,removeSelectedNodes:b,removeSelectedEdges:_,startConnection:G,updateConnection:L,endConnection:Y,setInteractive:C,setState:U,getIntersectingNodes:F,getIncomers:l,getOutgoers:u,getConnectedEdges:s,isNodeIntersecting:W,panBy:K,fitView:e=>r.value.fitView(e),zoomIn:e=>r.value.zoomIn(e),zoomOut:e=>r.value.zoomOut(e),zoomTo:(e,t)=>r.value.zoomTo(e,t),setViewport:(e,t)=>r.value.setViewport(e,t),setTransform:(e,t)=>r.value.setTransform(e,t),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(e,t,n)=>r.value.setCenter(e,t,n),fitBounds:(e,t)=>r.value.fitBounds(e,t),project:e=>r.value.project(e),screenToFlowCoordinate:e=>r.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>r.value.flowToScreenCoordinate(e),toObject:Z,fromObject:j,updateNodeInternals:a,viewportHelper:r,$reset:q,$destroy:()=>{}}}const Tl=["data-id","data-handleid","data-nodeid","data-handlepos"],Al={name:"Handle",compatConfig:{MODE:3}},Pl=(0,i.pM)({...Al,props:{id:{},type:{},position:{default:()=>vr.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=(0,i.bn)(e,["position","connectable","connectableStart","connectableEnd","id"]),a=(0,o.lW)((()=>n.type??"source")),l=(0,o.lW)((()=>n.isValidConnection??null)),{connectionStartHandle:u,connectionClickStartHandle:s,connectionEndHandle:d,vueFlowRef:c,nodesConnectable:f,noDragClassName:h,noPanClassName:v}=_u(),{id:p,node:g,nodeEl:m,connectedEdges:y}=Fr(),w=(0,o.KR)(),b=(0,o.lW)((()=>e.id??`${p}__handle-${e.position}`)),_=(0,o.lW)((()=>"undefined"===typeof e.connectableStart||e.connectableStart)),E=(0,o.lW)((()=>"undefined"===typeof e.connectableEnd||e.connectableEnd)),S=(0,o.lW)((()=>{var e,t,n,o,i,r;return(null==(e=u.value)?void 0:e.nodeId)===p&&(null==(t=u.value)?void 0:t.handleId)===b.value&&(null==(n=u.value)?void 0:n.type)===a.value||(null==(o=d.value)?void 0:o.nodeId)===p&&(null==(i=d.value)?void 0:i.handleId)===b.value&&(null==(r=d.value)?void 0:r.type)===a.value})),N=(0,o.lW)((()=>{var e,t,n;return(null==(e=s.value)?void 0:e.nodeId)===p&&(null==(t=s.value)?void 0:t.handleId)===b.value&&(null==(n=s.value)?void 0:n.type)===a.value})),{handlePointerDown:M,handleClick:k}=Yr({nodeId:p,handleId:b,isValidConnection:l,type:a}),C=(0,i.EW)((()=>"string"===typeof e.connectable&&"single"===e.connectable?!y.value.some((e=>{const t=e[`${a.value}Handle`];return e[a.value]===p&&(!t||t===b.value)})):"number"===typeof e.connectable?y.value.filter((e=>{const t=e[`${a.value}Handle`];return e[a.value]===p&&(!t||t===b.value)})).length<e.connectable:"function"===typeof e.connectable?e.connectable(g,y.value):yl(e.connectable)?e.connectable:f.value));function I(e){const t=ol(e);C.value&&_.value&&(t&&0===e.button||!t)&&M(e)}function T(e){p&&(s.value||_.value)&&C.value&&k(e)}return x((()=>g.initialized)).toBe(!0,{flush:"post"}).then((()=>{var t;const n=null==(t=g.handleBounds[a.value])?void 0:t.find((e=>e.id===b.value));if(!c.value||n)return;const o=c.value.querySelector(".vue-flow__transformationpane");if(!m.value||!w.value||!o||!b.value)return;const i=m.value.getBoundingClientRect(),r=w.value.getBoundingClientRect(),l=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(l.transform),s={id:b.value,position:e.position,x:(r.left-i.left)/u,y:(r.top-i.top)/u,...oa(w.value)};g.handleBounds[a.value]=[...g.handleBounds[a.value]??[],s]})),(0,i.hi)((()=>{const e=g.handleBounds[a.value];e&&(g.handleBounds[a.value]=e.filter((e=>e.id!==b.value)))})),t({handleClick:k,handlePointerDown:M,onClick:T,onPointerDown:I}),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{ref_key:"handle",ref:w,"data-id":`${(0,o.R1)(p)}-${b.value}-${a.value}`,"data-handleid":b.value,"data-nodeid":(0,o.R1)(p),"data-handlepos":e.position,class:(0,r.C4)(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${b.value}`,(0,o.R1)(h),(0,o.R1)(v),a.value,{connectable:C.value,connecting:N.value,connectablestart:_.value,connectableend:E.value,connectionindicator:C.value&&(_.value&&!S.value||E.value&&S.value)}]]),onMousedown:I,onTouchstartPassive:I,onClick:T},[(0,i.RG)(e.$slots,"default",{id:e.id})],42,Tl))}}),Bl=function({sourcePosition:e=vr.Bottom,targetPosition:t=vr.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:a,data:l}){const u=l.label||n;return[(0,i.h)(Pl,{type:"target",position:t,connectable:o,isValidConnection:r}),"string"!==typeof u&&u?(0,i.h)(u):(0,i.h)("div",{innerHTML:u}),(0,i.h)(Pl,{type:"source",position:e,connectable:o,isValidConnection:a})]};Bl.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],Bl.inheritAttrs=!1,Bl.compatConfig={MODE:3};const Dl=Bl,$l=function({targetPosition:e=vr.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const a=r.label||t;return[(0,i.h)(Pl,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!==typeof a&&a?(0,i.h)(a):(0,i.h)("div",{innerHTML:a})]};$l.props=["targetPosition","label","isValidTargetPos","connectable","data"],$l.inheritAttrs=!1,$l.compatConfig={MODE:3};const Rl=$l,Ol=function({sourcePosition:e=vr.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const a=r.label||t;return["string"!==typeof a&&a?(0,i.h)(a):(0,i.h)("div",{innerHTML:a}),(0,i.h)(Pl,{type:"source",position:e,connectable:n,isValidConnection:o})]};Ol.props=["sourcePosition","label","isValidSourcePos","connectable","data"],Ol.inheritAttrs=!1,Ol.compatConfig={MODE:3};const zl=Ol,Vl=["transform"],Xl=["width","height","x","y","rx","ry"],Gl=["y"],Ll={name:"EdgeText",compatConfig:{MODE:3}},Yl=(0,i.pM)({...Ll,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=(0,o.KR)({x:0,y:0,width:0,height:0}),n=(0,o.KR)(null),a=(0,i.EW)((()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`));function l(){if(!n.value)return;const e=n.value.getBBox();e.width===t.value.width&&e.height===t.value.height||(t.value=e)}return(0,i.sV)(l),(0,i.wB)([()=>e.x,()=>e.y,n,()=>e.label],l),(e,o)=>((0,i.uX)(),(0,i.CE)("g",{transform:a.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?((0,i.uX)(),(0,i.CE)("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:(0,r.Tr)(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Xl)):(0,i.Q3)("",!0),(0,i.Lk)("text",(0,i.v6)(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[(0,i.RG)(e.$slots,"default",{},(()=>["string"!==typeof e.label?((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.label),{key:0})):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,r.v_)(e.label),1)],64))]))],16,Gl)],8,Vl))}}),Hl=["id","d","marker-end","marker-start"],Fl=["d","stroke-width"],Wl={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Kl=(0,i.pM)({...Wl,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=(0,i.bn)(e,["interactionWidth","labelShowBg"]),a=(0,o.KR)(null),l=(0,o.KR)(null),u=(0,o.KR)(null),s=(0,i.OA)();return t({pathEl:a,interactionEl:l,labelEl:u}),(e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("path",{id:e.id,ref_key:"pathEl",ref:a,d:e.path,style:(0,r.Tr)(n.style),class:(0,r.C4)(["vue-flow__edge-path",(0,o.R1)(s).class]),"marker-end":e.markerEnd,"marker-start":e.markerStart},null,14,Hl),e.interactionWidth?((0,i.uX)(),(0,i.CE)("path",{key:0,ref_key:"interactionEl",ref:l,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Fl)):(0,i.Q3)("",!0),e.label&&e.labelX&&e.labelY?((0,i.uX)(),(0,i.Wv)(Yl,{key:1,ref_key:"labelEl",ref:u,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):(0,i.Q3)("",!0)],64))}});function Ul({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[r,l,i,a]}function Zl({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:l}){const u=.125*e+.375*i+.375*a+.125*n,s=.125*t+.375*r+.375*l+.125*o,d=Math.abs(u-e),c=Math.abs(s-t);return[u,s,d,c]}function jl(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ql({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case vr.Left:a=t-jl(t-o,r),l=n;break;case vr.Right:a=t+jl(o-t,r),l=n;break;case vr.Top:a=t,l=n-jl(n-i,r);break;case vr.Bottom:a=t,l=n+jl(i-n,r);break}return[a,l]}function Ql({sourceX:e,sourceY:t,sourcePosition:n=vr.Bottom,targetX:o,targetY:i,targetPosition:r=vr.Top,curvature:a=.25}){const[l,u]=ql({pos:n,x1:e,y1:t,x2:o,y2:i,c:a}),[s,d]=ql({pos:r,x1:o,y1:i,x2:e,y2:t,c:a}),[c,f,h,v]=Zl({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:d});return[`M${e},${t} C${l},${u} ${s},${d} ${o},${i}`,c,f,h,v]}function Jl({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case vr.Left:case vr.Right:r=.5*(t+o),a=n;break;case vr.Top:case vr.Bottom:r=t,a=.5*(n+i);break}return[r,a]}function eu({sourceX:e,sourceY:t,sourcePosition:n=vr.Bottom,targetX:o,targetY:i,targetPosition:r=vr.Top}){const[a,l]=Jl({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,s]=Jl({pos:r,x1:o,y1:i,x2:e,y2:t}),[d,c,f,h]=Zl({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:s});return[`M${e},${t} C${a},${l} ${u},${s} ${o},${i}`,d,c,f,h]}const tu={[vr.Left]:{x:-1,y:0},[vr.Right]:{x:1,y:0},[vr.Top]:{x:0,y:-1},[vr.Bottom]:{x:0,y:1}};function nu({source:e,sourcePosition:t=vr.Bottom,target:n}){return t===vr.Left||t===vr.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function ou(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function iu({source:e,sourcePosition:t=vr.Bottom,target:n,targetPosition:o=vr.Top,center:i,offset:r}){const a=tu[t],l=tu[o],u={x:e.x+a.x*r,y:e.y+a.y*r},s={x:n.x+l.x*r,y:n.y+l.y*r},d=nu({source:u,sourcePosition:t,target:s}),c=0!==d.x?"x":"y",f=d[c];let h,v,p;const g={x:0,y:0},m={x:0,y:0},[y,w,b,x]=Ul({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[c]*l[c]===-1){v=i.x??y,p=i.y??w;const e=[{x:v,y:u.y},{x:v,y:s.y}],t=[{x:u.x,y:p},{x:s.x,y:p}];h=a[c]===f?"x"===c?e:t:"x"===c?t:e}else{const i=[{x:u.x,y:s.y}],d=[{x:s.x,y:u.y}];if(h="x"===c?a.x===f?d:i:a.y===f?i:d,t===o){const t=Math.abs(e[c]-n[c]);if(t<=r){const o=Math.min(r-1,r-t);a[c]===f?g[c]=(u[c]>e[c]?-1:1)*o:m[c]=(s[c]>n[c]?-1:1)*o}}if(t!==o){const e="x"===c?"y":"x",t=a[c]===l[e],n=u[e]>s[e],o=u[e]<s[e],r=1===a[c]&&(!t&&n||t&&o)||1!==a[c]&&(!t&&o||t&&n);r&&(h="x"===c?i:d)}const y={x:u.x+g.x,y:u.y+g.y},w={x:s.x+m.x,y:s.y+m.y},b=Math.max(Math.abs(y.x-h[0].x),Math.abs(w.x-h[0].x)),x=Math.max(Math.abs(y.y-h[0].y),Math.abs(w.y-h[0].y));b>=x?(v=(y.x+w.x)/2,p=h[0].y):(v=h[0].x,p=(y.y+w.y)/2)}const _=[e,{x:u.x+g.x,y:u.y+g.y},...h,{x:s.x+m.x,y:s.y+m.y},n];return[_,v,p,b,x]}function ru(e,t,n,o){const i=Math.min(ou(e,t)/2,ou(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a){const t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return`L ${r+i*t},${a}Q ${r},${a} ${r},${a+i*o}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${r},${a+i*u}Q ${r},${a} ${r+i*l},${a}`}function au({sourceX:e,sourceY:t,sourcePosition:n=vr.Bottom,targetX:o,targetY:i,targetPosition:r=vr.Top,borderRadius:a=5,centerX:l,centerY:u,offset:s=20}){const[d,c,f,h,v]=iu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:l,y:u},offset:s}),p=d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?ru(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o,e}),"");return[p,c,f,h,v]}function lu({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,r,a,l]=Ul({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,r,a,l]}const uu=(0,i.pM)({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=lu(e);return(0,i.h)(Kl,{path:n,labelX:o,labelY:r,...t,...e})}}}),su=uu,du=(0,i.pM)({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=au({...e,sourcePosition:e.sourcePosition??vr.Bottom,targetPosition:e.targetPosition??vr.Top});return(0,i.h)(Kl,{path:n,labelX:o,labelY:r,...t,...e})}}}),cu=du,fu=(0,i.pM)({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>(0,i.h)(cu,{...e,...t,borderRadius:0})}}),hu=fu,vu=(0,i.pM)({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Ql({...e,sourcePosition:e.sourcePosition??vr.Bottom,targetPosition:e.targetPosition??vr.Top});return(0,i.h)(Kl,{path:n,labelX:o,labelY:r,...t,...e})}}}),pu=vu,gu=(0,i.pM)({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=eu({...e,sourcePosition:e.sourcePosition??vr.Bottom,targetPosition:e.targetPosition??vr.Top});return(0,i.h)(Kl,{path:n,labelX:o,labelY:r,...t,...e})}}}),mu=gu,yu={input:zl,default:Dl,output:Rl},wu={default:pu,straight:su,step:hu,smoothstep:cu,simplebezier:mu};function bu(e,t,n){const o=(0,i.EW)((()=>n=>e.nodes&&!t.value.length?e.nodes.find((e=>e.id===n)):e.nodes[t.value.indexOf(n)])),r=(0,i.EW)((()=>t=>e.edges&&!n.value.length?e.edges.find((e=>e.id===t)):e.edges[n.value.indexOf(t)])),a=(0,i.EW)((()=>{const t={...wu,...e.edgeTypes},n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=(0,i.EW)((()=>{const t={...yu,...e.nodeTypes},n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),u=(0,i.EW)((()=>{const t=e.nodes.filter((e=>!e.hidden));return e.onlyRenderVisibleElements?t&&Na(t,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):t??[]})),s=(t,n,i)=>{if(n=n??o.value(t.source),i=i??o.value(t.target),n&&i)return!t.hidden&&!i.hidden&&!n.hidden;e.hooks.error.trigger(new nl(el.EDGE_ORPHANED,t.id))},d=(0,i.EW)((()=>e.onlyRenderVisibleElements?e.edges.filter((t=>{const n=o.value(t.source),i=o.value(t.target);return s(t,n,i)&&Qa({sourcePos:n.computedPosition||{x:0,y:0},targetPos:i.computedPosition||{x:0,y:0},sourceWidth:n.dimensions.width,sourceHeight:n.dimensions.height,targetWidth:i.dimensions.width,targetHeight:i.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})})):e.edges.filter((e=>s(e))))),c=(0,i.EW)((()=>[...u.value,...d.value])),f=(0,i.EW)((()=>e.nodes.filter((e=>e.selected)))),h=(0,i.EW)((()=>e.edges.filter((e=>e.selected)))),v=(0,i.EW)((()=>[...f.value??[],...h.value??[]])),p=(0,i.EW)((()=>u.value.filter((e=>e.initialized&&void 0!==e.handleBounds)))),g=(0,i.EW)((()=>u.value.length>0&&p.value.length===u.value.length));return{getNode:o,getEdge:r,getElements:c,getEdgeTypes:a,getNodeTypes:l,getEdges:d,getNodes:u,getSelectedElements:v,getSelectedNodes:f,getSelectedEdges:h,getNodesInitialized:p,areNodesInitialized:g}}class xu{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e;const t=null==(e=(0,i.nI)())?void 0:e.appContext.app,n=(null==t?void 0:t.config.globalProperties.$vueFlowStorage)??xu.instance;return xu.instance=n??new xu,t&&(t.config.globalProperties.$vueFlowStorage=xu.instance),xu.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=kl(),r=(0,o.Kh)(n),a={};for(const[o,i]of Object.entries(r.hooks)){const e=`on${o.charAt(0).toUpperCase()+o.slice(1)}`;a[e]=i.on}const l={};for(const[o,i]of Object.entries(r.hooks))l[o]=i.trigger;const u=(0,i.EW)((()=>r.nodes.map((e=>e.id)))),s=(0,i.EW)((()=>r.edges.map((e=>e.id)))),d=bu(r,u,s),c=Il(e,r,u,s);c.setState({...r,...t});const f={...a,...d,...c,...w(r),emits:l,id:e,vueFlowVersion:"1.33.6",$destroy:()=>{this.remove(e)}};return this.set(e,f),f}getId(){return"vue-flow-"+this.currentId++}}function _u(e){const t=xu.getInstance(),n=(0,o.o5)(),r=null==e?void 0:e.id,l=(null==n?void 0:n.vueFlowId)||r;let u;if(n){const e=(0,i.WQ)(Br,null);"undefined"!==typeof e&&null!==e&&(u=e)}if(u||l&&(u=t.get(l)),!u||u&&r&&r!==u.id){const l=r??t.getId(),s=t.create(l,e);u=s;const d=n??(0,o.uY)(!0);d.run((()=>{(0,i.wB)(s.applyDefault,((e,t,n)=>{const o=e=>{s.applyNodeChanges(e)},i=e=>{s.applyEdgeChanges(e)};e?(s.onNodesChange(o),s.onEdgesChange(i)):(s.hooks.value.nodesChange.off(o),s.hooks.value.edgesChange.off(i)),n((()=>{s.hooks.value.nodesChange.off(o),s.hooks.value.edgesChange.off(i)}))}),{immediate:!0}),a((()=>{if(u){const e=t.get(u.id);e?e.$destroy():pl(`No store instance found for id ${u.id} in storage.`)}}))}))}else e&&u.setState(e);return n&&((0,i.Gt)(Br,u),n.vueFlowId=u.id),u}function Eu(e){const t=br(),{emits:n,dimensions:o}=_u();let r;(0,i.sV)((()=>{const a=e.value,l=()=>{if(!a)return;const e=oa(a);0!==e.width&&0!==e.height||n.error(new nl(el.MISSING_VIEWPORT_DIMENSIONS)),o.value={width:e.width||500,height:e.height||500}};l(),t.addEventListener("resize",l),a&&(r=new ResizeObserver((()=>l())),r.observe(a)),(0,i.xo)((()=>{t.removeEventListener("resize",l),r&&a&&r.unobserve(a)}))}))}const Su={name:"UserSelection",compatConfig:{MODE:3}},Nu=(0,i.pM)({...Su,props:{userSelectionRect:{}},setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"vue-flow__selection vue-flow__container",style:(0,r.Tr)({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}}),Mu=["tabIndex"],ku={name:"NodesSelection",compatConfig:{MODE:3}},Cu=(0,i.pM)({...ku,setup(e){const{emits:t,viewport:n,getSelectedNodes:a,noPanClassName:l,disableKeyboardA11y:u,userSelectionActive:s}=_u(),d=Ur(),c=(0,o.KR)(null),f=Pr({el:c,onStart(e){t.selectionDragStart(e)},onDrag(e){t.selectionDrag(e)},onStop(e){t.selectionDragStop(e)}});(0,i.sV)((()=>{var e;u.value||null==(e=c.value)||e.focus({preventScroll:!0})}));const h=(0,i.EW)((()=>Sa(a.value))),v=(0,i.EW)((()=>({width:`${h.value.width}px`,height:`${h.value.height}px`,top:`${h.value.y}px`,left:`${h.value.x}px`})));function p(e){t.selectionContextMenu({event:e,nodes:a.value})}function g(e){u||Ar[e.key]&&d({x:Ar[e.key].x,y:Ar[e.key].y},e.shiftKey)}return(e,t)=>!(0,o.R1)(s)&&h.value.width&&h.value.height?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,r.C4)(["vue-flow__nodesselection vue-flow__container",(0,o.R1)(l)]),style:(0,r.Tr)({transform:`translate(${(0,o.R1)(n).x}px,${(0,o.R1)(n).y}px) scale(${(0,o.R1)(n).zoom})`})},[(0,i.Lk)("div",{ref_key:"el",ref:c,class:(0,r.C4)([{dragging:(0,o.R1)(f)},"vue-flow__nodesselection-rect"]),style:(0,r.Tr)(v.value),tabIndex:(0,o.R1)(u)?void 0:-1,onContextmenu:p,onKeydown:g},null,46,Mu)],6)):(0,i.Q3)("",!0)}});function Iu(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Tu={name:"Pane",compatConfig:{MODE:3}},Au=(0,i.pM)({...Tu,props:{isSelecting:{type:Boolean}},setup(e){const{vueFlowRef:t,getNodes:n,getEdges:a,viewport:l,emits:u,userSelectionActive:s,removeSelectedElements:d,panOnDrag:c,userSelectionRect:f,elementsSelectable:h,nodesSelectionActive:v,addSelectedElements:p,getSelectedEdges:g,getSelectedNodes:m,removeNodes:y,removeEdges:w,selectionMode:b,deleteKeyCode:x,multiSelectionKeyCode:_,multiSelectionActive:E}=_u(),S=(0,o.KR)(null),N=(0,o.KR)(0),M=(0,o.KR)(0),k=(0,o.KR)(),C=(0,o.lW)((()=>h.value&&(e.isSelecting||s.value)));function I(){s.value=!1,f.value=null,N.value=0,M.value=0}function T(e){e.target!==S.value||C.value||(u.paneClick(e),d(),v.value=!1)}function A(e){var t;e.target===S.value&&(Array.isArray(c.value)&&(null==(t=c.value)?void 0:t.includes(2))?e.preventDefault():u.paneContextMenu(e))}function P(e){e.target===S.value&&u.paneScroll(e)}function B(n){if(k.value=t.value.getBoundingClientRect(),!C.value||!h||!e.isSelecting||0!==n.button||n.target!==S.value||!k.value)return;const{x:o,y:i}=Iu(n,k.value);d(),f.value={width:0,height:0,startX:o,startY:i,x:o,y:i},s.value=!0,u.selectionStart(n)}function D(t){if(!C.value)return u.paneMouseMove(t);if(!e.isSelecting||!k.value||!f.value)return;s.value||(s.value=!0),v.value&&(v.value=!1);const o=Iu(t,k.value),i=f.value.startX??0,r=f.value.startY??0,d={...f.value,x:o.x<i?o.x:i,y:o.y<r?o.y:r,width:Math.abs(o.x-i),height:Math.abs(o.y-r)},c=Na(n.value,f.value,l.value,b.value===pr.Partial),h=Ma(c,a.value);N.value=c.length,M.value=h.length,f.value=d,p([...c,...h])}function $(e){C.value&&0===e.button&&(!s.value&&f.value&&e.target===S.value&&T(e),v.value=N.value>0,I(),u.selectionEnd(e))}function R(e){var t;if(!C.value)return u.paneMouseLeave(e);s.value&&(v.value=N.value>0,null==(t=u.selectionEnd)||t.call(u,e)),I()}function O(e){C.value||u.paneMouseEnter(e)}return Mr(x,(e=>{if(!e)return;const t=n.value.reduce(((e,t)=>((!t.selected&&t.parentNode&&e.find((e=>e.id===t.parentNode))||t.selected)&&e.push(t),e)),[]);(t||g.value)&&(g.value.length>0&&w(g.value),t.length>0&&y(t),v.value=!1,d())}),{actInsideInputWithModifier:!1}),Mr(_,(e=>{E.value=e})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{ref_key:"container",ref:S,class:(0,r.C4)(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:T,onContextmenu:A,onWheelPassive:P,onMouseenter:O,onMousedown:B,onMousemove:D,onMouseup:$,onMouseleave:R},[(0,i.RG)(e.$slots,"default"),(0,o.R1)(s)&&(0,o.R1)(f)?((0,i.uX)(),(0,i.Wv)(Nu,{key:0,"user-selection-rect":(0,o.R1)(f)},null,8,["user-selection-rect"])):(0,i.Q3)("",!0),(0,o.R1)(v)&&(0,o.R1)(m).length?((0,i.uX)(),(0,i.Wv)(Cu,{key:1})):(0,i.Q3)("",!0)],34))}}),Pu={name:"Transform",compatConfig:{MODE:3}},Bu=(0,i.pM)({...Pu,setup(e){const{viewport:t}=_u();return(e,n)=>((0,i.uX)(),(0,i.CE)("div",{class:"vue-flow__transformationpane vue-flow__container",style:(0,r.Tr)({transform:`translate(${(0,o.R1)(t).x}px,${(0,o.R1)(t).y}px) scale(${(0,o.R1)(t).zoom})`})},[(0,i.RG)(e.$slots,"default")],4))}}),Du={name:"Viewport",compatConfig:{MODE:3}},$u=(0,i.pM)({...Du,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:a,translateExtent:l,zoomActivationKeyCode:u,selectionKeyCode:s,panActivationKeyCode:d,panOnScroll:c,panOnScrollMode:f,panOnScrollSpeed:h,panOnDrag:v,zoomOnDoubleClick:p,zoomOnPinch:g,zoomOnScroll:m,preventScrolling:y,noWheelClassName:w,noPanClassName:b,emits:x,connectionStartHandle:_,userSelectionActive:E,paneDragging:S,d3Zoom:N,d3Selection:M,d3ZoomHandler:k,viewport:C,viewportRef:I}=_u();Eu(I);const T=(0,o.KR)(!1),A=(0,o.KR)(!1);let P=null,B=!1,D=0,$={x:0,y:0,zoom:0};const R=Mr(d),O=Mr(s),z=Mr(u),V=(0,o.lW)((()=>R.value||v.value)),X=(0,o.lW)((()=>R.value||c.value)),G=(0,o.lW)((()=>O.value||!0===s.value&&!0!==V.value));function L(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function Y(e){const t=e.ctrlKey&&rl()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function H(e,t){return e.x!==t.x&&!Number.isNaN(t.x)||e.y!==t.y&&!Number.isNaN(t.y)||e.zoom!==t.k&&!Number.isNaN(t.k)}function F(e){return{x:e.x,y:e.y,zoom:e.k}}function W(e,t){return e.target.closest(`.${t}`)}return(0,i.sV)((()=>{if(!I.value)return void pl("Viewport element is missing");const e=I.value,o=e.getBoundingClientRect(),r=hr().scaleExtent([t.value,n.value]).translateExtent(l.value),u=Dt(e).call(r),s=u.on("wheel.zoom"),d=ir.translate(a.value.x??0,a.value.y??0).scale(ia(a.value.zoom??1,t.value,n.value)),c=[[0,0],[o.width,o.height]],v=r.constrain()(d,c,l.value);r.transform(u,v),r.wheelDelta(Y),N.value=r,M.value=u,k.value=s,C.value={x:v.x,y:v.y,zoom:v.k},r.on("start",(e=>{var t;if(!e.sourceEvent)return null;D=e.sourceEvent.button,T.value=!0;const n=F(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(S.value=!0),$=n,x.viewportChangeStart(n),x.moveStart({event:e,flowTransform:n})})),r.on("end",(e=>{if(!e.sourceEvent)return null;if(T.value=!1,S.value=!1,L(V.value,D??0)&&!B&&x.paneContextMenu(e.sourceEvent),B=!1,H($,e.transform)){const t=F(e.transform);$=t,x.viewportChangeEnd(t),x.moveEnd({event:e,flowTransform:t})}})),r.filter((e=>{var t,n;const o=z.value||m.value,i=g.value&&e.ctrlKey;if((!0===V.value||Array.isArray(V.value)&&V.value.includes(1))&&1===e.button&&"mousedown"===e.type&&((null==(t=e.target)?void 0:t.closest(".vue-flow__node"))||(null==(n=e.target)?void 0:n.closest(".vue-flow__edge"))))return!0;if(!V.value&&!o&&!X.value&&!p.value&&!g.value)return!1;if(E.value)return!1;if(!p.value&&"dblclick"===e.type)return!1;if(W(e,w.value)&&"wheel"===e.type)return!1;if(W(e,b.value)&&("wheel"!==e.type||X.value&&"wheel"===e.type&&!z.value))return!1;if(!g.value&&e.ctrlKey&&"wheel"===e.type)return!1;if(!o&&!X.value&&!i&&"wheel"===e.type)return!1;if(!V.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(V.value)&&!V.value.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const r=Array.isArray(V.value)&&V.value.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})),(0,i.wB)([E,V],(()=>{E.value&&!T.value?r.on("zoom",null):E.value||r.on("zoom",(e=>{C.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=F(e.transform);B=L(V.value,D??0),x.viewportChange(t),x.move({event:e,flowTransform:t})}))}),{immediate:!0}),(0,i.wB)([E,X,f,z,g,y,w],(()=>{!X.value||z.value||E.value?"undefined"!==typeof s&&u.on("wheel.zoom",(function(e,t){const n=!y.value&&"wheel"===e.type&&!e.ctrlKey;if(n||W(e,w.value))return null;e.preventDefault(),s.call(this,e,t)}),{passive:!1}):u.on("wheel.zoom",(e=>{if(W(e,w.value))return!1;const t=z.value||m.value,n=g.value&&e.ctrlKey,o=!y.value||X.value||t||n;if(!o)return!1;e.preventDefault(),e.stopImmediatePropagation();const i=u.property("__zoom").k||1,a=rl();if(e.ctrlKey&&g.value&&a){const t=Rt(e),n=Y(e),o=i*2**n;return void r.scaleTo(u,o,t,e)}const l=1===e.deltaMode?20:1;let s=f.value===wr.Vertical?0:e.deltaX*l,d=f.value===wr.Horizontal?0:e.deltaY*l;!a&&e.shiftKey&&f.value!==wr.Vertical&&!s&&d&&(s=d,d=0),r.translateBy(u,-s/i*h.value,-d/i*h.value);const c=F(u.property("__zoom"));P&&clearTimeout(P),A.value?(x.move({event:e,flowTransform:c}),x.viewportChange(c),P=setTimeout((()=>{x.moveEnd({event:e,flowTransform:c}),x.viewportChangeEnd(c),A.value=!1}),150)):(A.value=!0,x.moveStart({event:e,flowTransform:c}),x.viewportChangeStart(c))}),{passive:!1})}),{immediate:!0})})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{ref_key:"viewportRef",ref:I,class:"vue-flow__viewport vue-flow__container"},[(0,i.bF)(Au,{"is-selecting":G.value,class:(0,r.C4)({connecting:!!(0,o.R1)(_),dragging:(0,o.R1)(S),draggable:V.value})},{default:(0,i.k6)((()=>[(0,i.bF)(Bu,null,{default:(0,i.k6)((()=>[(0,i.RG)(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","class"])],512))}}),Ru=["id"],Ou=["id"],zu=["id"],Vu={name:"A11yDescriptions",compatConfig:{MODE:3}},Xu=(0,i.pM)({...Vu,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:a}=_u();return(e,l)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",{id:`${(0,o.R1)(kr)}-${(0,o.R1)(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+(0,r.v_)((0,o.R1)(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Ru),(0,i.Lk)("div",{id:`${(0,o.R1)(Cr)}-${(0,o.R1)(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Ou),(0,o.R1)(n)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,id:`${(0,o.R1)(Ir)}-${(0,o.R1)(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},(0,r.v_)((0,o.R1)(a)),9,zu))],64))}});function Gu(){const e=_u();(0,i.wB)((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}function Lu(e,t,n){return n===vr.Left?e-t:n===vr.Right?e+t:e}function Yu(e,t,n){return n===vr.Top?e-t:n===vr.Bottom?e+t:e}const Hu=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=vr.Top,type:r}){return(0,i.h)("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Lu(t,e,o),cy:Yu(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Hu.props=["radius","centerX","centerY","position","type"],Hu.compatConfig={MODE:3};const Fu=Hu,Wu=(0,i.pM)({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:r,edgeUpdaterRadius:a,emits:l,nodesSelectionActive:u,noPanClassName:s,getEdgeTypes:d,removeSelectedEdges:c,findEdge:f,findNode:h,isValidConnection:v,multiSelectionActive:p,disableKeyboardA11y:g}=_u(),m=Xr(e.edge,l),y=C(e,"edge"),w=(0,o.KR)(!1),b=(0,o.KR)(!1),x=(0,o.KR)(""),_=(0,o.KR)(null),E=(0,o.KR)("source"),S=(0,o.KR)(null);(0,i.Gt)(Rr,e.id),(0,i.Gt)(Or,S);const N=(0,i.EW)((()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class)),M=(0,i.EW)((()=>y.value.style instanceof Function?y.value.style(y.value):y.value.style)),{handlePointerDown:k}=Yr({nodeId:x,handleId:_,type:E,isValidConnection:v,edgeUpdaterType:E,onEdgeUpdate:A,onEdgeUpdateEnd:P});return()=>{const n=h(y.value.source),o=h(y.value.target),u="pathOptions"in y.value?y.value.pathOptions:{};if(!n&&!o)return l.error(new nl(el.EDGE_SOURCE_TARGET_MISSING,y.value.id,y.value.source,y.value.target)),null;if(!n)return l.error(new nl(el.EDGE_SOURCE_MISSING,y.value.id,y.value.source)),null;if(!o)return l.error(new nl(el.EDGE_TARGET_MISSING,y.value.id,y.value.target)),null;if(!y||n.hidden||o.hidden)return null;let c;c=r.value===mr.Strict?n.handleBounds.source:[...n.handleBounds.source||[],...n.handleBounds.target||[]];const f=ja(c,y.value.sourceHandle);let v;v=r.value===mr.Strict?o.handleBounds.target:[...o.handleBounds.target||[],...o.handleBounds.source||[]];const p=ja(v,y.value.targetHandle),g=f?f.position:vr.Bottom,x=p?p.position:vr.Top,{sourceX:_,sourceY:E,targetY:k,targetX:C}=qa(n,f,g,o,p,x);return y.value.sourceX=_,y.value.sourceY=E,y.value.targetX=C,y.value.targetY=k,(0,i.h)("g",{ref:S,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===e.type?"default":e.name}`,s.value,N.value,{updating:w.value,selected:y.value.selected,animated:y.value.animated,inactive:!e.selectable}],onClick:D,onContextmenu:$,onDblclick:R,onMouseenter:O,onMousemove:z,onMouseleave:V,onKeyDown:e.focusable?L:void 0,tabIndex:e.focusable?0:void 0,"aria-label":null===y.value.ariaLabel?void 0:y.value.ariaLabel||`Edge from ${y.value.source} to ${y.value.target}`,"aria-describedby":e.focusable?`${Cr}-${t}`:void 0,role:e.focusable?"button":"img"},[b.value?null:(0,i.h)(!1===e.type?d.value.default:e.type,{id:e.id,sourceNode:n,targetNode:o,source:y.value.source,target:y.value.target,type:y.value.type,updatable:e.updatable,selected:y.value.selected,animated:y.value.animated,label:y.value.label,labelStyle:y.value.labelStyle,labelShowBg:y.value.labelShowBg,labelBgStyle:y.value.labelBgStyle,labelBgPadding:y.value.labelBgPadding,labelBgBorderRadius:y.value.labelBgBorderRadius,data:y.value.data,events:{...y.value.events,...m.on},style:M.value,markerStart:`url('#${Ta(y.value.markerStart,t)}')`,markerEnd:`url('#${Ta(y.value.markerEnd,t)}')`,sourcePosition:g,targetPosition:x,sourceX:_,sourceY:E,targetX:C,targetY:k,sourceHandleId:y.value.sourceHandle,targetHandleId:y.value.targetHandle,interactionWidth:y.value.interactionWidth,...u}),["source"===e.updatable||!0===e.updatable?[(0,i.h)("g",{onMousedown:X,onMouseenter:I,onMouseout:T},(0,i.h)(Fu,{position:g,centerX:_,centerY:E,radius:a.value,type:"source","data-type":"source"}))]:null,"target"===e.updatable||!0===e.updatable?[(0,i.h)("g",{onMousedown:G,onMouseenter:I,onMouseout:T},(0,i.h)(Fu,{position:x,centerX:C,centerY:k,radius:a.value,type:"target","data-type":"target"}))]:null]])};function I(){w.value=!0}function T(){w.value=!1}function A(e,t){m.emit.update({event:e,edge:y.value,connection:t})}function P(e){m.emit.updateEnd({event:e,edge:y.value}),b.value=!1}function B(e,t){0===e.button&&(b.value=!0,x.value=t?y.value.target:y.value.source,_.value=(t?y.value.targetHandle:y.value.sourceHandle)??"",E.value=t?"target":"source",m.emit.updateStart({event:e,edge:y.value}),k(e))}function D(t){var o;const i={event:t,edge:y.value};e.selectable&&(u.value=!1,y.value.selected&&p.value?(c([y.value]),null==(o=S.value)||o.blur()):n([y.value])),m.emit.click(i)}function $(e){m.emit.contextMenu({event:e,edge:y.value})}function R(e){m.emit.doubleClick({event:e,edge:y.value})}function O(e){m.emit.mouseEnter({event:e,edge:y.value})}function z(e){m.emit.mouseMove({event:e,edge:y.value})}function V(e){m.emit.mouseLeave({event:e,edge:y.value})}function X(e){B(e,!0)}function G(e){B(e,!1)}function L(t){var o;if(!g.value&&Tr.includes(t.key)&&e.selectable){const i="Escape"===t.key;i?(null==(o=S.value)||o.blur(),c([f(e.id)])):n([f(e.id)])}}}}),Ku=Wu,Uu={[vr.Left]:vr.Right,[vr.Right]:vr.Left,[vr.Top]:vr.Bottom,[vr.Bottom]:vr.Top},Zu=(0,i.pM)({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:a,connectionLineType:l,connectionLineStyle:u,connectionLineOptions:s,connectionStatus:d,viewport:c,findNode:f}=_u(),h=null==(e=(0,i.WQ)(zr))?void 0:e["connection-line"];return()=>{var e,v,p,g,m;if(!o.value)return null;const y=f(o.value.nodeId);if(!y)return null;const w=o.value.handleId,b=o.value.type,x=(null==(e=r.value)?void 0:e.handleId)&&f(r.value.nodeId)||null,_=(a.value.x-c.value.x)/c.value.zoom,E=(a.value.y-c.value.y)/c.value.zoom,S=y.handleBounds;let N=null==S?void 0:S[b];if(n.value===mr.Loose&&(N=N||(null==S?void 0:S["source"===b?"target":"source"])),!N)return null;const M=(w?N.find((e=>e.id===w)):N[0])??null,k=(null==M?void 0:M.position)||vr.Top,{x:C,y:I}=Za(k,{...y.dimensions,...y.computedPosition},M),T=x&&(null==(v=r.value)?void 0:v.handleId)&&((n.value===mr.Strict?null==(p=x.handleBounds["source"===b?"target":"source"])?void 0:p.find((e=>{var t;return e.id===(null==(t=r.value)?void 0:t.handleId)})):null==(g=[...x.handleBounds.source||[],...x.handleBounds.target||[]])?void 0:g.find((e=>{var t;return e.id===(null==(t=r.value)?void 0:t.handleId)})))||(null==(m=x.handleBounds[b??"target"])?void 0:m[0]))||null,A=k?Uu[k]:null;if(!k||!A)return null;const P=l.value??s.value.type??gr.Bezier;let B="";const D={sourceX:C,sourceY:I,sourcePosition:k,targetX:_,targetY:E,targetPosition:A};return P===gr.Bezier?[B]=Ql(D):P===gr.Step?[B]=au({...D,borderRadius:0}):P===gr.SmoothStep?[B]=au(D):P===gr.SimpleBezier?[B]=eu(D):B=`M${C},${I} ${_},${E}`,(0,i.h)("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},(0,i.h)("g",{class:"vue-flow__connection"},h?(0,i.h)(h,{sourceX:C,sourceY:I,sourcePosition:k,targetX:_,targetY:E,targetPosition:A,sourceNode:y,sourceHandle:M,targetNode:x,targetHandle:T,markerEnd:`url(#${Ta(s.value.markerEnd,t)})`,markerStart:`url(#${Ta(s.value.markerStart,t)})`,connectionStatus:d.value}):(0,i.h)("path",{d:B,class:[s.value.class,d,"vue-flow__connection-path"],style:{...u.value,...s.value.style},"marker-end":`url(#${Ta(s.value.markerEnd,t)})`,"marker-start":`url(#${Ta(s.value.markerStart,t)})`})))}}}),ju=Zu,qu=["id","markerWidth","markerHeight","markerUnits","orient"],Qu={name:"MarkerType",compatConfig:{MODE:3}},Ju=(0,i.pM)({...Qu,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===(0,o.R1)(yr).ArrowClosed?((0,i.uX)(),(0,i.CE)("polyline",{key:0,style:(0,r.Tr)({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):(0,i.Q3)("",!0),e.type===(0,o.R1)(yr).Arrow?((0,i.uX)(),(0,i.CE)("polyline",{key:1,style:(0,r.Tr)({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):(0,i.Q3)("",!0)],8,qu))}}),es={name:"MarkerDefinitions",compatConfig:{MODE:3}},ts=(0,i.pM)({...es,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=_u(),a=(0,i.EW)((()=>{const e=[],i=[],a=n=>{if(n){const o=Ta(n,t);e.includes(o)||("object"===typeof n?i.push({...n,id:o,color:n.color||r.value}):i.push({id:o,color:r.value,type:n}),e.push(o))}};for(const t of[o.value.markerEnd,o.value.markerStart])a(t);return n.value.reduce(((e,t)=>{for(const n of[t.markerStart,t.markerEnd])a(n);return e.sort(((e,t)=>e.id.localeCompare(t.id)))}),i),i}));return(e,t)=>((0,i.uX)(),(0,i.CE)("defs",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.value,(e=>((0,i.uX)(),(0,i.Wv)(Ju,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))]))}}),ns={class:"vue-flow__edges vue-flow__container"},os={name:"Edges",compatConfig:{MODE:3}},is=(0,i.pM)({...os,setup(e){const t=(0,i.WQ)(zr),{edgesUpdatable:n,edgesFocusable:a,elementsSelectable:l,findNode:u,getEdges:s,getEdgeTypes:d,elevateEdgesOnSelect:c,dimensions:f,emits:h}=_u(),v=(0,i.nI)();function p(e){return"undefined"===typeof e?l.value:e}function g(e){return"undefined"===typeof e?n.value:e}function m(e){return"undefined"===typeof e?a.value:e}function y(e,n){const o=e||"default",r=null==t?void 0:t[`edge-${o}`];if(r)return r;let a=n??d.value[o];if("string"===typeof a&&v){const e=Object.keys(v.appContext.components);e&&e.includes(o)&&(a=(0,i.g2)(o,!1))}return a&&"string"!==typeof a?a:(h.error(new nl(el.EDGE_TYPE_MISSING,a)),!1)}return(e,t)=>(0,o.R1)(f).width&&(0,o.R1)(f).height?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[((0,i.uX)(),(0,i.CE)("svg",ns,[(0,i.bF)(ts)])),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)((0,o.R1)(s),(e=>((0,i.uX)(),(0,i.CE)("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:(0,r.Tr)({zIndex:(0,o.R1)(Ja)(e,(0,o.R1)(u),(0,o.R1)(c))})},[(0,i.bF)((0,o.R1)(Ku),{id:e.id,edge:e,type:y(e.type,e.template),name:e.type||"default",selectable:p(e.selectable),updatable:g(e.updatable),focusable:m(e.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4)))),128)),(0,i.bF)((0,o.R1)(ju))],64)):(0,i.Q3)("",!0)}}),rs=(0,i.pM)({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){(0,i.Gt)(Dr,e.id);const{id:t,noPanClassName:n,selectNodesOnDrag:r,nodesSelectionActive:a,multiSelectionActive:l,emits:u,findNode:s,removeSelectedNodes:d,addSelectedNodes:c,updateNodeDimensions:f,onUpdateNodeInternals:h,getIntersectingNodes:v,getNodeTypes:p,nodeExtent:g,elevateNodesOnSelect:m,disableKeyboardA11y:y,ariaLiveMessage:w,snapToGrid:b,snapGrid:_,nodeDragThreshold:E,getConnectedEdges:S}=_u(),N=Ur(),M=C(e,"node"),k=(0,i.EW)((()=>{var e;return s(null==(e=M.value)?void 0:e.parentNode)})),I=(0,i.EW)((()=>S(M.value?[M.value]:[]))),T=(0,o.KR)(null);(0,i.Gt)($r,T);const{emit:A,on:P}=Kr(M.value,u),B=Pr({id:e.id,el:T,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>M.value.dragHandle,onStart(e){A.dragStart({...e,intersections:v(M.value)})},onDrag(e){A.drag({...e,intersections:v(M.value)})},onStop(e){A.dragStop({...e,intersections:v(M.value)})}}),D=(0,i.EW)((()=>M.value.class instanceof Function?M.value.class(M.value):M.value.class)),$=(0,i.EW)((()=>{const e=(M.value.style instanceof Function?M.value.style(M.value):M.value.style)||{},t=M.value.width instanceof Function?M.value.width(M.value):M.value.width,n=M.value.height instanceof Function?M.value.height(M.value):M.value.height;return t&&(e.width="string"===typeof t?t:`${t}px`),n&&(e.height="string"===typeof n?n:`${n}px`),e})),R=(0,o.lW)((()=>Number(M.value.zIndex??$.value.zIndex??0)));return h((t=>{t.includes(e.id)&&z()})),(0,i.sV)((()=>{e.resizeObserver.observe(T.value)})),(0,i.xo)((()=>{e.resizeObserver.unobserve(T.value)})),(0,i.wB)([()=>M.value.type,()=>M.value.sourcePosition,()=>M.value.targetPosition],(()=>{(0,i.dY)((()=>{f([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}))})),(0,i.wB)([()=>M.value.position.x,()=>M.value.position.y,()=>{var e;return null==(e=k.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=k.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=k.value)?void 0:e.computedPosition.z},R,()=>M.value.selected,()=>M.value.dimensions.height,()=>M.value.dimensions.width,()=>{var e;return null==(e=k.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=k.value)?void 0:e.dimensions.width}],(([e,t,n,o,i,r])=>{const a={x:e,y:t,z:r+(m.value&&M.value.selected?1e3:0)};M.value.computedPosition="undefined"!==typeof n&&"undefined"!==typeof o?Ca({x:n,y:o,z:i},a):a}),{flush:"post",immediate:!0}),(0,i.wB)([()=>M.value.extent,g],(([e,t],[n,o])=>{e===n&&t===o||O()})),"parent"===M.value.extent||"object"===typeof M.value.extent&&"range"in M.value.extent&&"parent"===M.value.extent.range?x((()=>M.value.initialized)).toBe(!0).then(O):O(),()=>(0,i.h)("div",{ref:T,"data-id":M.value.id,class:["vue-flow__node",`vue-flow__node-${!1===e.type?"default":e.name}`,{[n.value]:e.draggable,dragging:null==B?void 0:B.value,draggable:e.draggable,selected:M.value.selected,selectable:e.selectable,parent:M.value.isParent},D.value],style:{visibility:M.value.initialized?"visible":"hidden",zIndex:M.value.computedPosition.z??R.value,transform:`translate(${M.value.computedPosition.x}px,${M.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...$.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":y.value?void 0:`${kr}-${t}`,"aria-label":M.value.ariaLabel,onMouseenter:V,onMousemove:X,onMouseleave:G,onContextmenu:L,onClick:H,onDblclick:Y,onKeydown:F},[(0,i.h)(!1===e.type?p.value.default:e.type,{id:M.value.id,type:M.value.type,data:M.value.data,events:{...M.value.events,...P},selected:M.value.selected,resizing:M.value.resizing,dragging:B.value,connectable:e.connectable,position:M.value.computedPosition,dimensions:M.value.dimensions,isValidTargetPos:M.value.isValidTargetPos,isValidSourcePos:M.value.isValidSourcePos,parent:M.value.parentNode,parentNodeId:M.value.parentNode,zIndex:M.value.computedPosition.z??R.value,targetPosition:M.value.targetPosition,sourcePosition:M.value.sourcePosition,label:M.value.label,dragHandle:M.value.dragHandle,onUpdateNodeInternals:z})]);function O(){const e=M.value.computedPosition;b.value&&(e.x=_.value[0]*Math.round(e.x/_.value[0]),e.y=_.value[1]*Math.round(e.y/_.value[1]));const{computedPosition:t,position:n}=Ua(M.value,e,u.error,g.value,k.value);M.value.computedPosition.x===t.x&&M.value.computedPosition.y===t.y||(M.value.computedPosition={...M.value.computedPosition,...t}),M.value.position.x===n.x&&M.value.position.y===n.y||(M.value.position=n)}function z(){T.value&&f([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}function V(e){(null==B?void 0:B.value)||A.mouseEnter({event:e,node:M.value,connectedEdges:I.value})}function X(e){(null==B?void 0:B.value)||A.mouseMove({event:e,node:M.value,connectedEdges:I.value})}function G(e){(null==B?void 0:B.value)||A.mouseLeave({event:e,node:M.value,connectedEdges:I.value})}function L(e){return A.contextMenu({event:e,node:M.value,connectedEdges:I.value})}function Y(e){return A.doubleClick({event:e,node:M.value,connectedEdges:I.value})}function H(t){e.selectable&&(!r.value||!e.draggable||E.value>0)&&ml(M.value,l.value,c,d,a,!1,T.value),A.click({event:t,node:M.value,connectedEdges:I.value})}function F(t){if(!xr(t)&&!y.value)if(Tr.includes(t.key)&&e.selectable){const e="Escape"===t.key;ml(M.value,l.value,c,d,a,e,T.value)}else e.draggable&&M.value.selected&&Ar[t.key]&&(w.value=`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~M.value.position.x}, y: ${~~M.value.position.y}`,N({x:Ar[t.key].x,y:Ar[t.key].y},t.shiftKey))}}}),as=rs,ls={height:"0",width:"0"},us={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},ss=(0,i.pM)({...us,setup(e){const{viewportRef:t}=_u(),n=(0,o.lW)((()=>{var e;return null==(e=t.value)?void 0:e.getElementsByClassName("vue-flow__edge-labels")[0]}));return(e,t)=>((0,i.uX)(),(0,i.CE)("svg",null,[((0,i.uX)(),(0,i.CE)("foreignObject",ls,[((0,i.uX)(),(0,i.Wv)(i.Im,{to:n.value,disabled:!n.value},[(0,i.RG)(e.$slots,"default")],8,["to","disabled"]))]))]))}});function ds(e={includeHiddenNodes:!1}){const{nodes:t}=_u();return(0,i.EW)((()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0}))}const cs={class:"vue-flow__nodes vue-flow__container"},fs={name:"Nodes",compatConfig:{MODE:3}},hs=(0,i.pM)({...fs,setup(e){const{nodes:t,nodesDraggable:n,nodesFocusable:r,elementsSelectable:a,nodesConnectable:l,getNodes:u,getNodeTypes:s,updateNodeDimensions:d,emits:c}=_u(),f=ds(),h=(0,i.WQ)(zr),v=(0,o.KR)(),p=(0,i.nI)();function g(e){return"undefined"===typeof e?n.value:e}function m(e){return"undefined"===typeof e?a.value:e}function y(e){return"undefined"===typeof e?l.value:e}function w(e){return"undefined"===typeof e?r.value:e}function b(e,t){const n=e||"default",o=null==h?void 0:h[`node-${n}`];if(o)return o;let r=t??s.value[n];if("string"===typeof r&&p){const e=Object.keys(p.appContext.components);e&&e.includes(n)&&(r=(0,i.g2)(n,!1))}return r&&"string"!==typeof r?r:(c.error(new nl(el.NODE_TYPE_MISSING,r)),!1)}return(0,i.wB)(f,(e=>{e&&(0,i.dY)((()=>{c.nodesInitialized(t.value)}))}),{immediate:!0}),(0,i.sV)((()=>{v.value=new ResizeObserver((e=>{const t=e.map((e=>{const t=e.target.getAttribute("data-id");return{id:t,nodeElement:e.target,forceUpdate:!0}}));(0,i.dY)((()=>d(t)))}))})),(0,i.xo)((()=>{var e;return null==(e=v.value)?void 0:e.disconnect()})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",cs,[v.value?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)((0,o.R1)(u),(e=>((0,i.uX)(),(0,i.Wv)((0,o.R1)(as),{id:e.id,key:e.id,"resize-observer":v.value,type:b(e.type,e.template),name:e.type||"default",draggable:g(e.draggable),selectable:m(e.selectable),connectable:y(e.connectable),focusable:w(e.focusable),node:e},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"])))),128)):(0,i.Q3)("",!0)]))}}),vs=(0,i.Lk)("div",{class:"vue-flow__edge-labels"},null,-1),ps={name:"VueFlow",compatConfig:{MODE:3}},gs=(0,i.pM)({...ps,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=(0,i.Ht)(),a=C(o,"modelValue",n),l=C(o,"nodes",n),u=C(o,"edges",n),{vueFlowRef:s,hooks:d,getNodeTypes:c,getEdgeTypes:f,...h}=_u(o),v=ea({modelValue:a,nodes:l,edges:u},o,{vueFlowRef:s,hooks:d,getNodeTypes:c,getEdgeTypes:f,...h});return Ml(n,d),Gu(),(0,i.Gt)(zr,r),(0,i.hi)((()=>{v()})),t({vueFlowRef:s,hooks:d,getNodeTypes:c,getEdgeTypes:f,...h}),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{ref_key:"vueFlowRef",ref:s,class:"vue-flow"},[(0,i.bF)($u,null,{default:(0,i.k6)((()=>[(0,i.bF)(is),vs,(0,i.bF)(hs),(0,i.RG)(e.$slots,"zoom-pane")])),_:3}),(0,i.RG)(e.$slots,"default"),(0,i.bF)(Xu)],512))}}),ms={name:"Panel",compatConfig:{MODE:3}},ys=(0,i.pM)({...ms,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=_u(),a=(0,i.EW)((()=>`${t.position}`.split("-")));return(e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,r.C4)(["vue-flow__panel",a.value]),style:(0,r.Tr)({pointerEvents:(0,o.R1)(n)?"none":"all"})},[(0,i.RG)(e.$slots,"default")],6))}});function ws(e){const{type:t,id:n,nodeId:r,onConnect:a,onDisconnect:l}=e,{connectionLookup:u}=_u(),s=Hr(),d=(0,o.lW)((()=>(0,o.BA)(r)??s)),c=(0,o.lW)((()=>(0,o.BA)(t))),f=(0,o.lW)((()=>(0,o.BA)(n)??null)),h=(0,o.KR)();return(0,i.wB)((()=>u.value.get(`${d.value}-${c.value}-${f.value}`)),(e=>{Sl(h.value,e)||(h.value=e)}),{immediate:!0}),(0,i.wB)([h,()=>"undefined"!==typeof a,()=>"undefined"!==typeof l],(([e],[t])=>{if(t&&t!==e){const n=e??new Map;El(t,n,l),El(n,t,a)}}),{immediate:!0}),(0,i.EW)((()=>{var e;return Array.from((null==(e=h.value)?void 0:e.values())??[])}))}function bs(e){const{findNode:t}=_u();return(0,i.EW)({get(){const n=(0,o.BA)(e);if(!Array.isArray(n)){const e=t(n);return e?{id:e.id,type:e.type,data:e.data??null}:null}const i=[];for(const e of n){const n=t(e);n&&i.push({id:n.id,type:n.type,data:n.data??null})}return i},set(){pl("You are trying to set node data via useNodesData. This is not supported.")}})}}}]);
//# sourceMappingURL=111.a6a5c192.js.map
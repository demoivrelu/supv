{"version":3,"file":"js/379.686b8be7.js","mappings":"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","sources":["webpack://module-manager/./src/components/CamCheck.vue","webpack://module-manager/./src/components/CamCheck.vue?235a"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin-top: 6%\"></div>\n    <el-button\n      style=\"margin-left: -70%\"\n      type=\"primary\"\n      @click=\"openFullScreen2\"\n    >\n      Check Test\n    </el-button>\n    <el-row>\n      <el-col :span=\"3\">\n        <div class=\"grid-content bg-light\"></div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div\n          class=\"grid-content bg-light\"\n          style=\"margin-top: 5%; margin-left: -80%\"\n        >\n          Monitor\n        </div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div class=\"grid-content bg-light\" v-if=\"dispTitle\">\n          <el-row type=\"flex\" justify=\"left\" align=\"middle\">\n            <el-col :span=\"4\" style=\"font-size: small\">\n              <el-result icon=\"success\"> </el-result>\n            </el-col>\n            <el-col :span=\"10\">result message...</el-col>\n          </el-row>\n        </div>\n      </el-col>\n      <el-col :span=\"3\">\n        <div class=\"grid-content bg-light\"></div>\n      </el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"3\">\n        <div class=\"grid-content bg-light\"></div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div\n          class=\"grid-content bg-light\"\n          type=\"flex\"\n          justify=\"center\"\n          align=\"middle\"\n        >\n          <video ref=\"videoElement0\" autoplay style=\"border-radius: 20px\">\n            <track\n              kind=\"captions\"\n              src=\"captions.vtt\"\n              srclang=\"en\"\n              label=\"English\"\n            />\n          </video>\n        </div>\n      </el-col>\n      <el-col :span=\"9\">\n        <div\n          class=\"grid-content bg-light\"\n          type=\"flex\"\n          justify=\"center\"\n          align=\"middle\"\n        >\n          <video\n            v-if=\"disp\"\n            ref=\"videoElement1\"\n            autoplay\n            style=\"border-radius: 20px\"\n          >\n            <track\n              kind=\"captions\"\n              src=\"captions.vtt\"\n              srclang=\"en\"\n              label=\"English\"\n            />\n          </video>\n          <div>\n            <canvas\n              ref=\"canvas\"\n              style=\"display: none; border-radius: 20px\"\n            ></canvas>\n            <img\n              ref=\"img\"\n              :src=\"photo\"\n              style=\"border-radius: 20px\"\n              alt=\"Captured Photo\"\n            />\n          </div>\n        </div>\n      </el-col>\n      <el-col :span=\"3\">\n        <div class=\"grid-content bg-light\"></div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'CamCheck',\n  data() {\n    return {\n      devices: [],\n      selectedDevice: null,\n      videoStream: null,\n      photo: null,\n      disp: true,\n      dispTitle: false,\n    };\n  },\n  async created() {\n    await this.getVideoDevices();\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.$refs.img.style.visibility = 'hidden';\n    });\n    this.startCapture();\n    setInterval(() => {\n      axios\n        .post('/srv/GET-MONITOR', {})\n        .then((res) => {\n          console.log(res.data);\n          if (res.data.MonitorSig === true) {\n            this.openFullScreen2();\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }, 1000);\n  },\n  methods: {\n    async getVideoDevices() {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        this.devices = devices.filter((device) => device.kind === 'videoinput');\n        if (this.devices.length > 0) {\n          this.selectedDevice = this.devices[0].deviceId;\n        }\n      } catch (error) {\n        console.error('Error getting video devices:', error);\n      }\n    },\n    async startCapture() {\n      try {\n        const constraints = {\n          video: true,\n        };\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n        this.videoStream = stream;\n        this.$refs.videoElement0.srcObject = stream;\n        this.$refs.videoElement1.srcObject = stream;\n      } catch (error) {\n        console.error('Error accessing camera:', error);\n      }\n    },\n    stopCapture() {\n      if (this.videoStream) {\n        const tracks = this.videoStream.getTracks();\n        tracks.forEach((track) => track.stop());\n        this.$refs.videoElement.srcObject = null;\n        this.videoStream = null;\n      }\n    },\n    takePhoto() {\n      const { canvas } = this.$refs;\n      // (video);\n      canvas.width = this.$refs.videoElement0.videoWidth;\n      canvas.height = this.$refs.videoElement0.videoHeight;\n      const context = canvas.getContext('2d');\n      context.drawImage(\n        this.$refs.videoElement0,\n        0,\n        0,\n        canvas.width,\n        canvas.height,\n      );\n      this.photo = canvas.toDataURL('image/png');\n      // const blob = this.base64ToBlob(this.photo, 'image/jpeg');\n      // 将 Blob 对象保存为文件\n      // const link = document.createElement('a');\n      // link.href = this.photo;\n      // link.download = 'photo.jpg';\n      // link.click();\n    },\n    base64ToBlob(base64Data, contentType) {\n      // const contentType = contentType || '';\n      const sliceSize = 1024;\n      const byteCharacters = atob(base64Data);\n      const byteArrays = [];\n      for (\n        let offset = 0;\n        offset < byteCharacters.length;\n        offset += sliceSize\n      ) {\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\n        const byteNumbers = new Array(slice.length);\n        for (let i = 0; i < slice.length; i += 1) {\n          byteNumbers[i] = slice.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        byteArrays.push(byteArray);\n      }\n      return new Blob(byteArrays, { type: contentType });\n    },\n    openFullScreen2() {\n      const loading = this.$loading({\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0.7)',\n      });\n      this.dispTitle = false;\n      setTimeout(() => {\n        this.disp = false;\n        this.$refs.img.style.visibility = '';\n        this.takePhoto();\n        loading.close();\n        this.dispTitle = true;\n      }, 3000);\n    },\n  },\n};\n</script>\n\n<style>\n.el-row {\n  /* margin-bottom: 20px; */\n  /* margin-top: 20px; */\n}\n\n.el-col {\n  border-radius: 4px;\n}\n\n.bg-purple-dark {\n  background: #99a9bf;\n}\n\n.bg-purple {\n  background: #d3dce6;\n}\n\n.bg-purple-light {\n  background: #e5e9f2;\n}\n\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n\n.row-bg {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n\n.el-result {\n  transform: scale(0.75);\n  margin-top: -30%;\n  margin-bottom: -30%;\n}\n</style>\n","import { render } from \"./CamCheck.vue?vue&type=template&id=76c0e948\"\nimport script from \"./CamCheck.vue?vue&type=script&lang=js\"\nexport * from \"./CamCheck.vue?vue&type=script&lang=js\"\n\nimport \"./CamCheck.vue?vue&type=style&index=0&id=76c0e948&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","style","class","key","type","justify","align","ref","autoplay","kind","src","srclang","label","_hoisted_9","_hoisted_13","_createElementBlock","_hoisted_1","_createVNode","_component_el_button","onClick","$options","openFullScreen2","default","_withCtx","_createTextVNode","_","_component_el_row","_component_el_col","span","_hoisted_2","_hoisted_3","$data","dispTitle","_hoisted_4","_component_el_result","icon","_createCommentVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","disp","_hoisted_12","_hoisted_14","_hoisted_15","photo","alt","_hoisted_16","_hoisted_17","name","data","devices","selectedDevice","videoStream","created","this","getVideoDevices","mounted","$nextTick","$refs","img","visibility","startCapture","setInterval","axios","post","then","res","console","log","MonitorSig","catch","err","methods","navigator","mediaDevices","enumerateDevices","filter","device","length","deviceId","error","constraints","video","stream","getUserMedia","videoElement0","srcObject","videoElement1","stopCapture","tracks","getTracks","forEach","track","stop","videoElement","takePhoto","canvas","width","videoWidth","height","videoHeight","context","getContext","drawImage","toDataURL","base64ToBlob","base64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","loading","$loading","lock","text","spinner","background","setTimeout","close","__exports__","render"],"sourceRoot":""}
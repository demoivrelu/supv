"use strict";(self["webpackChunktmp"]=self["webpackChunktmp"]||[]).push([[379],{45379:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var s=i(56768);const l=(0,s.Lk)("div",{style:{"margin-top":"6%"}},null,-1),n=(0,s.Lk)("div",{class:"grid-content bg-light"},null,-1),a=(0,s.Lk)("div",{class:"grid-content bg-light",style:{"margin-top":"5%","margin-left":"-80%"}}," Monitor ",-1),o={key:0,class:"grid-content bg-light"},r=(0,s.Lk)("div",{class:"grid-content bg-light"},null,-1),d=(0,s.Lk)("div",{class:"grid-content bg-light"},null,-1),c={class:"grid-content bg-light",type:"flex",justify:"center",align:"middle"},u={ref:"videoElement0",autoplay:"",style:{"border-radius":"20px"}},g=(0,s.Lk)("track",{kind:"captions",src:"captions.vtt",srclang:"en",label:"English"},null,-1),h=[g],p={class:"grid-content bg-light",type:"flex",justify:"center",align:"middle"},v={key:0,ref:"videoElement1",autoplay:"",style:{"border-radius":"20px"}},k=(0,s.Lk)("track",{kind:"captions",src:"captions.vtt",srclang:"en",label:"English"},null,-1),f=[k],b={ref:"canvas",style:{display:"none","border-radius":"20px"}},m=["src"],y=(0,s.Lk)("div",{class:"grid-content bg-light"},null,-1);function F(e,t,i,g,k,F){const E=(0,s.g2)("el-button"),C=(0,s.g2)("el-col"),L=(0,s.g2)("el-result"),_=(0,s.g2)("el-row");return(0,s.uX)(),(0,s.CE)("div",null,[l,(0,s.bF)(E,{style:{"margin-left":"-70%"},type:"primary",onClick:F.openFullScreen2},{default:(0,s.k6)((()=>[(0,s.eW)(" Check Test ")])),_:1},8,["onClick"]),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(C,{span:3},{default:(0,s.k6)((()=>[n])),_:1}),(0,s.bF)(C,{span:9},{default:(0,s.k6)((()=>[a])),_:1}),(0,s.bF)(C,{span:9},{default:(0,s.k6)((()=>[k.dispTitle?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(_,{type:"flex",justify:"left",align:"middle"},{default:(0,s.k6)((()=>[(0,s.bF)(C,{span:4,style:{"font-size":"small"}},{default:(0,s.k6)((()=>[(0,s.bF)(L,{icon:"success"})])),_:1}),(0,s.bF)(C,{span:10},{default:(0,s.k6)((()=>[(0,s.eW)("result message...")])),_:1})])),_:1})])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(C,{span:3},{default:(0,s.k6)((()=>[r])),_:1})])),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(C,{span:3},{default:(0,s.k6)((()=>[d])),_:1}),(0,s.bF)(C,{span:9},{default:(0,s.k6)((()=>[(0,s.Lk)("div",c,[(0,s.Lk)("video",u,h,512)])])),_:1}),(0,s.bF)(C,{span:9},{default:(0,s.k6)((()=>[(0,s.Lk)("div",p,[k.disp?((0,s.uX)(),(0,s.CE)("video",v,f,512)):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.Lk)("canvas",b,null,512),(0,s.Lk)("img",{ref:"img",src:k.photo,style:{"border-radius":"20px"},alt:"Captured Photo"},null,8,m)])])])),_:1}),(0,s.bF)(C,{span:3},{default:(0,s.k6)((()=>[y])),_:1})])),_:1})])}i(44114),i(16573),i(78100),i(77936),i(37467),i(44732),i(79577),i(64979);var E=i(98355),C={name:"CamCheck",data(){return{devices:[],selectedDevice:null,videoStream:null,photo:null,disp:!0,dispTitle:!1}},async created(){await this.getVideoDevices()},mounted(){this.$nextTick((()=>{this.$refs.img.style.visibility="hidden"})),this.startCapture(),setInterval((()=>{E.A.post("/srv/GET-MONITOR",{}).then((e=>{console.log(e.data),!0===e.data.MonitorSig&&this.openFullScreen2()})).catch((e=>{console.log(e)}))}),1e3)},methods:{async getVideoDevices(){try{const e=await navigator.mediaDevices.enumerateDevices();this.devices=e.filter((e=>"videoinput"===e.kind)),this.devices.length>0&&(this.selectedDevice=this.devices[0].deviceId)}catch(e){console.error("Error getting video devices:",e)}},async startCapture(){try{const e={video:!0},t=await navigator.mediaDevices.getUserMedia(e);this.videoStream=t,this.$refs.videoElement0.srcObject=t,this.$refs.videoElement1.srcObject=t}catch(e){console.error("Error accessing camera:",e)}},stopCapture(){if(this.videoStream){const e=this.videoStream.getTracks();e.forEach((e=>e.stop())),this.$refs.videoElement.srcObject=null,this.videoStream=null}},takePhoto(){const{canvas:e}=this.$refs;e.width=this.$refs.videoElement0.videoWidth,e.height=this.$refs.videoElement0.videoHeight;const t=e.getContext("2d");t.drawImage(this.$refs.videoElement0,0,0,e.width,e.height),this.photo=e.toDataURL("image/png")},base64ToBlob(e,t){const i=1024,s=atob(e),l=[];for(let n=0;n<s.length;n+=i){const e=s.slice(n,n+i),t=new Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);const a=new Uint8Array(t);l.push(a)}return new Blob(l,{type:t})},openFullScreen2(){const e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.dispTitle=!1,setTimeout((()=>{this.disp=!1,this.$refs.img.style.visibility="",this.takePhoto(),e.close(),this.dispTitle=!0}),3e3)}}},L=i(71241);const _=(0,L.A)(C,[["render",F]]);var w=_}}]);
//# sourceMappingURL=379.6534c767.js.map